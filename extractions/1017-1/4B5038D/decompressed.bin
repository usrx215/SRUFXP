var gibbon;gibbon=function(gibbon){var nrdp=this.nrdp;if(!(nrdp&&nrdp.gibbon)){return{}}gibbon={makeWidget:nrdp.gibbon.makeWidget,setScene:function(widget){nrdp.gibbon.scene.widget=widget},log:function(msg){nrdp.log.debug(msg.toString(),"UI_SCRIPT")},setTimeout:nrdp.gibbon.setTimeout,clearTimeout:nrdp.gibbon.clearTimeout,eval:nrdp.gibbon.eval,collectGarbage:nrdp.gibbon.collectGarbage,loadScript:nrdp.gibbon.loadScript,load:nrdp.gibbon.load,stopLoad:nrdp.gibbon.stopLoad,addEventListener:nrdp.gibbon.addEventListener.bind(nrdp.gibbon),removeEventListener:nrdp.gibbon.removeEventListener.bind(nrdp.gibbon),get email(){return nrdp.gibbon.email},get password(){return nrdp.gibbon.password},sync:nrdp.gibbon.sync};gibbon.scene={get width(){return nrdp.gibbon.scene.width},get height(){return nrdp.gibbon.scene.height}};return gibbon}(gibbon);var App={markup:{}};gibbon.defaultTextStyle=function(){this.color=new gibbon.color};gibbon.defaultTextStyle.prototype={size:30,align:"left",weight:"normal",variant:"normal",wrap:false,richText:false,underline:false,strikethrough:false,merge:function(d){for(var c in d){if(d.hasOwnProperty(c)){this[c]=d[c]}}if(d.hasOwnProperty("color")){this.color=new gibbon.color(d.color)}}};gibbon.rect=function(c,j,d,f){var e=this;if(typeof c=="object"){e.x=c.x;e.y=c.y;e.width=c.width;e.height=c.height}else{e.x=c!==undefined?c:0;e.y=j!==undefined?j:0;e.width=d!==undefined?d:0;e.height=f!==undefined?f:0}};gibbon.rect.prototype={get left(){return this.x},set left(c){var d=this;d.width+=d.x-c;d.x=c},get top(){return this.y},set top(c){var d=this;d.height+=d.y-c;d.y=c},get right(){return this.x+this.width},set right(c){this.width=c-this.x},get bottom(){return this.y+this.height},set bottom(c){this.height=c-this.y},get size(){return{width:this.width,height:this.height}},copy:function(d){var c=this;c.x=d.x;c.y=d.y;c.width=d.width;c.height=d.height},clear:function(){var c=this;c.x=0;c.y=0;c.width=0;c.height=0},get empty(){return this.width<=0||this.height<=0},overlaps:function(d){var c=this;return !(c.x>d.right||c.y>d.bottom||c.right<d.x||c.bottom<d.y)},unite:function(d){var c=this;if(c.empty){c.x=d.x;c.y=d.y;c.width=d.width;c.height=d.height}else{if(!d.empty){if(c.x>d.x){c.left=d.x}if(c.y>d.y){c.top=d.y}if(c.right<d.right){c.right=d.right}if(c.bottom<d.bottom){c.bottom=d.bottom}}}},intersect:function(d){var c=this,e;if(c.overlaps(d)){e=new gibbon.rect(c.x>d.x?c.x:d.x,c.y>d.y?c.y:d.y,0,0);e.right=c.right<d.right?c.right:d.right;e.bottom=c.bottom<d.bottom?c.bottom:d.bottom;return e}return new gibbon.rect}};gibbon.color=function(c){var d=this;d.a=255;if(c===undefined){d.r=0;d.g=0;d.b=0}else{if(typeof c==="object"){d.r=c.r;d.g=c.g;d.b=c.b;if(c.a!==undefined){d.a=c.a}}else{if(typeof c==="string"){d.parseString(c)}}}};gibbon.color.prototype={parseString:function(c){var e=this,f=gibbon.color.regex,d;c=c.replace(f.trimLeft,"").replace(f.trimRight,"").toLowerCase();if(d=f.hex6.exec(c)){e.a=255;e.r=parseInt(d[1],16);e.g=parseInt(d[2],16);e.b=parseInt(d[3],16);return true}if(d=f.hex3.exec(c)){e.a=255;e.r=parseInt(d[1]+""+d[1],16);e.g=parseInt(d[2]+""+d[2],16);e.b=parseInt(d[3]+""+d[3],16);return true}if(d=f.rgb.exec(c)){e.a=255;e.r=d[1];e.g=d[2];e.b=d[3];return true}if(d=f.rgba.exec(c)){e.r=d[1];e.g=d[2];e.b=d[3];e.a=d[4];return true}if(c=="transparent"){e.r=0;e.g=0;e.b=0;return true}return false}};gibbon.color.regex=function(){var h="[-\\+]?\\d+%?";var f="[-\\+]?\\d*\\.\\d+%?";var c="(?:"+f+")|(?:"+h+")";var e="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?";var d="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?";return{rgb:new RegExp("rgb"+e),rgba:new RegExp("rgba"+d),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,trimLeft:/^[\s,#]+/,trimRight:/\s+$/}}();(function(){var e=function(){this._styles=[];this._parentSelectorMap={}};e.prototype={constructor:e,addProperties:function(h,n,l){var j={_parentSelector:undefined},m;if(n!==undefined){j._parentSelector=n;this._parentSelectorMap[n]=true}for(m in l){if(l.hasOwnProperty(m)){j[m]=l[m]}}this._styles.push(j)},select:function(m,h){var o=this._styles,l,j,p;for(j=0,p=o.length;j<p;j++){l=o[j];if(l._parentSelector!==undefined){h._hasParentStyleReference=true;if(!h._target.parentHasClass(l._parentSelector)){continue}}for(k in l){if(l.hasOwnProperty(k)){m[k]=l[k]}}}return l}};var f=function(){this._styleSheet={}};f.prototype={constructor:f,addStyles:function(h){var m=this,l=m._styleSheet,j;for(j in h){if(h.hasOwnProperty(j)){m._addStyleEntry(j,h[j])}}},_addStyleEntry:function(h,l){var n=this._styleSheet,j,q,p,o,m;p=h.indexOf(">");if(p>0){m=h.substr(p+1);o=h.substr(0,p)}else{m=h}j=n[m];if(j===undefined){j=new e}j.addProperties(m,o,l);n[m]=j},_selectStyle:function(m,l,h){if(l.length>0){var j=this._styleSheet[l];if(j!==undefined){return j.select(m,h)}}},computeStyles:function(j){var m=this,p=j.computedStyles,o=j.className,h=o&&o.split(" "),o,l,s,q=false;if(!h){return q}for(l=0,s=h.length;l<s;l++){o=h[l];if(o.length>0){if(m._selectStyle(p,o,j)){q=true}}}j.computedStyles=p;return q}};var c=982734;var d=function(j){var h=this;h._id="style: "+c++;h._classString="";h._computedStyles={};h._classNameMap={};h._target=j;h._hasParentStyleReference=false};d.prototype={constructor:d,hasClass:function(h){return this._classNameMap.hasOwnProperty(h)},addClass:function(j){var h=this;if(!h.hasClass(j)){h.className=h._classString.length?h._classString+" "+j:j}},addClasses:function(j){var m=this,l,q,h=m._classString,p,o;if(h.length){p=h.split(" ");for(l=0,q=j.length;l<q;l++){o=j[l];if(!m.hasClass(o)){p.push(o)}}m.className=p.join(" ")}else{m.className=j.join(" ")}},removeClass:function(m){var j=this._classString,h=j.replace(this._regExp(m),"$1"),l=h.length-1;this.className=h[l]===" "?h.substr(0,l):h},removeClasses:function(h){var j=this._classString,p,l,o,m,q;for(m=0,q=h.length;m<q;m++){p=h[m];l=j.replace(this._regExp(p),"$1");o=l.length-1;j=l[o]===" "?l.substr(0,o):l}this.className=j},get className(){return this._classString},set className(j){var h=this;if(j===h._classString){return}h._classString=j;h.computeStyles()},computeStyles:function(){var m=this,p=m._classString,h=p&&p.split(" "),o={},l,s,q,j;if(h){for(l=0,s=h.length;l<s;l++){q=h[l];o[q]=1}}m._classNameMap=o;m.resetComputedStyles();gibbon.style.computeStyles(m);m._target.onStyleChange(m)},resetComputedStyles:function(){this._computedStyles={}},get computedStyles(){return this._computedStyles},set computedStyles(h){this._computedStyles=h},_regExp:function(h){return new RegExp("(^|\\s+)"+h+"(?:$|\\s+)","g")}};gibbon.style={_styleClass:d,_styleSheetClass:f,_styleSheets:[],createStyle:function(h){return new this._styleClass(h)},createStyleSheet:function(){return new this._styleSheetClass},addStyleSheet:function(h){this._styleSheets.push(h)},computeStyles:function(h){var l=this._styleSheets,j,o,m=false;for(j=0,o=l.length;j<o;j++){m=l[j].computeStyles(h)||m}return m}}})();gibbon.scene.start=function(c){if(!c.hasOwnProperty("scene")){throw new Error("gibbon.scene.start: no scene specified in markup")}if(c.hasOwnProperty("styles")){this._styleSheet.addStyles(c.styles)}gibbon.scene.widgets=gibbon.createWidgets(c.scene);gibbon.setScene(gibbon.scene.widgets._proxy)};gibbon.backstage={};gibbon.backstage.start=function(c){if(!c.hasOwnProperty("scene")){throw new Error("gibbon.backstage.start: no scene specified in markup")}gibbon.backstage.widgets=gibbon.createWidgets(c.scene)};gibbon.backstage.cue=function(){if(gibbon.backstage&&gibbon.backstage.widgets){gibbon.scene.widgets=gibbon.backstage.widgets;gibbon.backstage.widgets=undefined;gibbon.setScene(gibbon.scene.widgets._proxy)}};gibbon.scene._styleSheet=gibbon.style.createStyleSheet();gibbon.style.addStyleSheet(gibbon.scene._styleSheet);gibbon.getElementById=function(c){if(gibbon.scene&&gibbon.scene.widgets){if(gibbon.scene.widgets.id===c){return gibbon.scene.widgets}else{return gibbon.scene.widgets.getElementById(c)}}if(gibbon.backstage&&gibbon.backstage.widgets){if(gibbon.backstage.widgets.id===c){return gibbon.backstage.widgets}else{return gibbon.backstage.widgets.getElementById(c)}}return undefined};gibbon.getElementsByClassName=function(c){if(gibbon.scene&&gibbon.scene.widgets){return gibbon.scene.widgets.getElementsByClassName(c)}return[]};gibbon.Observable=function(c){this._subscribe=c};gibbon.Observable.prototype.subscribe=function(c){if(typeof c==="function"){return this._subscribe({onNext:c,onCompleted:this._noop,onError:this._onError})}else{return this._subscribe(c)}};gibbon.Observable.prototype._noop=function(){};gibbon.Observable.prototype._onError=function(c){throw c};(function(){function e(I,H){if(typeof I=="string"){if(I.indexOf("%")!=-1){var G=I.split("%",1);I=parseInt(G[0],10);if(H===undefined){H=0}I=I*H/100}else{I=parseInt(I,10)}}return I}function p(G,H){var I=[];if(G==="center"){I.push("center-horizontal")}else{I.push(G)}if(H==="center"){I.push("center-vertical")}else{I.push(H)}return I.join(" ")}function h(K){var J=this,G,H,I;for(I in K){G=J[I];H=K[I];if(typeof H==="object"&&typeof G==="object"&&G.setProperties!==undefined){G.setProperties(H)}else{J[I]=H}}}function D(G,H){this._proxyWidget=G;this._update=H}D.prototype={_x:0,_y:0,get x(){return this._x},set x(G){this._x=G;this._update(G,undefined)},get y(){return this._y},set y(G){this._y=G;this._update(undefined,G)},setProperties:function(G){if(G.x!==undefined){this._x=G.x}if(G.y!==undefined){this._y=G.y}this._update(G.x,G.y)},serialize:function(){return{x:this._x,y:this._y}}};function q(G,H){this._proxyWidget=G;this._update=H}q.prototype={_width:0,_height:0,get width(){return this._width},set width(G){this._width=G;this._update(G,undefined)},get height(){return this._height},set height(G){this._height=G;this._update(undefined,G)},setProperties:function(G){if(G.width!==undefined){this._width=G.width}if(G.height!==undefined){this._height=G.height}this._update(G.width,G.height)},serialize:function(){return{width:this._width,height:this._height}}};function m(G){this._widget=G}m.prototype={get x(){if(this._x===undefined){this._x=new u("x",this._widget)}return this._x},set x(G){this.x.setProperties(G)},get y(){if(this._y===undefined){this._y=new u("y",this._widget)}return this._y},set y(G){this.y.setProperties(G)},get width(){if(this._width===undefined){this._width=new u("width",this._widget)}return this._width},set width(G){this.width.setProperties(G)},get height(){if(this._height===undefined){this._height=new u("height",this._widget)}return this._height},set height(G){this.height.setProperties(G)},get transform(){if(this._transform===undefined){this._transform=new v(this._widget)}return this._transform},set transform(G){this.transform.setProperties(G)},get scale(){if(this._scale===undefined){this._scale=new u("scale",this._widget)}return this._scale},set scale(G){this.scale.setProperties(G)},get opacity(){if(this._opacity===undefined){this._opacity=new u("opacity",this._widget)}return this._opacity},set opacity(G){this.opacity.setProperties(G)},setProperties:h,serialize:function(){var G=this,H;G._x&&(H||(H={}))&&(H.x=G._x.serialize());G._y&&(H||(H={}))&&(H.y=G._y.serialize());G._width&&(H||(H={}))&&(H.width=G._width.serialize());G._height&&(H||(H={}))&&(H.height=G._height.serialize());G._transform&&(H||(H={}))&&(H.transform=G._transform.serialize());G._scale&&(H||(H={}))&&(H.scale=G._scale.serialize());G._opacity&&(H||(H={}))&&(H.opacity=G._opacity.serialize());return H}};function v(G){this._widget=G}v.prototype={get scale(){if(this._scale===undefined){this._scale=new u("scale",this._widget)}return this._scale},set scale(G){this.scale.setProperties(G)},setProperties:h,serialize:function(){var G=this,H;G._scale&&(H||(H={}))&&(H.scale=G._scale.serialize());return H}};function u(H,G){this._prop=H;this._proxyWidget=G._proxy}u.prototype={_duration:0,_ease:"linear",_flags:"",get duration(){return this._duration},set duration(G){this._duration=G;this._update()},get ease(){return this._ease},set ease(G){this._ease=G;this._update()},get flags(){return this._flags},set flags(G){this._flags=G;this._update()},setProperties:h,_update:function(){var G=this;G._proxyWidget.animate(G._prop,G._duration,G._ease,G._flags)},serialize:function(){var G=this;return{duration:G._duration,ease:G._ease,flags:G._flags}}};function s(G){this._proxyWidget=G}s.prototype={_left:0,_top:0,_right:0,_bottom:0,_wrap:0,get left(){return this._left},set left(G){this._left=G;this._proxyWidget.padding=this},get top(){return this._top},set top(G){this._top=G;this._proxyWidget.padding=this},get right(){return this._right},set right(G){this._right=G;this._proxyWidget.padding=this},get bottom(){return this._bottom},set bottom(G){this._bottom=G;this._proxyWidget.padding=this},get wrap(){return this._wrap},set wrap(G){this._wrap=G;this._proxyWidget.padding=this},setProperties:function(G){if(G.left!==undefined){this._left=G.left}if(G.top!==undefined){this._top=G.top}if(G.right!==undefined){this._right=G.right}if(G.bottom!==undefined){this._bottom=G.bottom}if(G.wrap!==undefined){this._wrap=G.wrap}this._proxyWidget.padding=this},serialize:function(){var G=this;return{left:G._left,top:G._top,right:G._right,bottom:G._bottom,wrap:G._wrap}}};function n(G){this._update=G}n.prototype={_r:0,_g:0,_b:0,_a:255,get r(){return this._r},set r(G){var H=this;H._r=G;H._update()},get g(){return this._g},set g(G){var H=this;H._g=G;H._update()},get b(){return this._b},set b(G){var H=this;H._b=G;H._update()},get a(){return this._a},set a(G){var H=this;H._a=G;H._update()},setProperties:function(H){var G=this;G._r=H.r;G._g=H.g;G._b=H.b;G._a=H.a!==undefined?H.a:255;G._update()},serialize:function(){var G=this;return{r:G._r,g:G._g,b:G._b,a:G._a}}};function c(G){this._proxyWidget=G}c.prototype={_scale:1,get scale(){return this._scale},set scale(G){this._scale=G;this._proxyWidget.scale=G},get origin(){if(this._origin===undefined){this._origin=new D(this._proxyWidget,function(G,H){if(G!==undefined){this._proxyWidget.transformOriginX=G}if(H!==undefined){this._proxyWidget.transformOriginY=H}})}return this._origin},set origin(G){this.origin.setProperties(G)},setProperties:function(G){if(G.scale!==undefined){this.scale=G.scale}if(G.origin!==undefined){this.origin.setProperties(G.origin)}},serialize:function(){var G=this;return{scale:G._scale,origin:G._origin}}};function w(H,I,G){this._widget=H;this._proxyWidget=H._proxy;this._proxyImage=I;this._imageEventType=G}w.prototype={_x:0,_y:0,lazy:false,async:true,set src(G){this._src=G;this._proxyImage.url={url:G,lazy:this.lazy,async:this.async}},get src(){return this._src},get align(){if(this._align===undefined){this._align=new F(this._proxyImage)}return this._align},set align(G){this.align.setProperties(G)},get color(){if(this._color===undefined){var G=this;G._color=new n(function(){G._proxyWidget.color=this})}return this._color},set color(G){this.color.setProperties(G)},get x(){return this._x},set x(G){this._x=G;this._updatePosition()},get y(){return this._y},set y(G){this._y=G;this._updatePosition()},_updatePosition:function(){var H=this._proxyImage,G={x:this._x,y:this._y,width:this._width>0?this._width:H.width,height:this._height>0?this._height:H.height};H.sourceRect=G},get width(){return this._width},set width(G){this._width=G;this._updateSize(G,undefined)},get height(){return this._height},set height(G){this._height=G;this._updateSize(undefined,G)},_updateSize:function(I,G){var K=this._proxyImage,J=K.sourceRect,H={x:J!==undefined?J.x:0,y:J!==undefined?J.y:0,width:this.width,height:this.height};K.sourceRect=H},set load(G){throw"image load called"},loadImage:function(){var G=this._proxyImage;G&&G.reload()},get imageLoaded(){var G=this;if(G._imageLoaded===undefined){G._imageLoaded=new gibbon.Observable(function(H){var I=function(J){H.onNext(J)};G._proxyWidget.addEventListener(G._imageEventType,I);return{dispose:function(){G._proxyWidget.removeEventListener(G._imageEventType,I)}}})}return G._imageLoaded},set imageLoaded(G){throw"illegal set imageLoaded"},setProperties:function(H){if(H.lazy!==undefined){this.lazy=H.lazy}if(H.async!==undefined){this.async=H.async}if(H.src!==undefined){this.src=H.src}if(H.align!==undefined){this.align.setProperties(H.align)}if(H.color!==undefined){this.color.setProperties(H.color)}if(H.x!==undefined||H.y!==undefined||H.width!==undefined||H.height!==undefined){var G=this,I=G._proxyImage;I.sourceRect={x:H.x!==undefined?H.x:G.x,y:H.y!==undefined?H.y:G.y,width:H.width!==undefined?H.width:G._widget.width!==undefined?G._widget.width:I.width,height:H.height!==undefined?H.height:G._widget.height!==undefined?G._widget.height:I.height};G._x=H.x;G._y=H.y;G._width=H.width;G._height=H.height}if(H.load!==undefined){this.load=H.load}},serialize:function(){var G=this,H={x:G._x,y:G._y,width:G._width,height:G._height,lazy:G.lazy,async:G.async,src:G.src,load:G.load};G._align&&(H.align=G._align.serialize());G._color&&(H.color=G._color.serialize());return H}};function F(G){this._proxyImage=G}F.prototype={get horizontal(){return this._horizontal||""},set horizontal(G){this._horizontal=G;this._proxyImage.halign=G},get vertical(){return this._vertical||""},set vertical(G){this._vertical=G;this._proxyImage.valign=G},setProperties:function(H){var G=this;if(H.horizontal!==undefined){G._horizontal=H.horizontal;this._proxyImage.halign=H.horizontal}if(H.vertical!==undefined){G._vertical=H.vertical;this._proxyImage.valign=H.vertical}},serialize:function(){var G=this;return{horizontal:G._horizontal,vertical:G._vertical}}};function l(G){this._proxyWidget=G;this._textStyle=new gibbon.defaultTextStyle}l.prototype={get italic(){return !!this._italic},set italic(G){this._italic=!!G;this._textStyle.variant=G?"italic":"normal";this._update()},get bold(){return !!this._bold},set bold(G){this._bold=!!G;this._textStyle.weight=G?"bold":"normal";this._update()},get richText(){return this._textStyle.richText},set richText(G){this._textStyle.richText=!!G;this._update()},get underline(){return this._textStyle.underline},set underline(G){this._textStyle.underline=!!G;this._update()},get strikethrough(){return this._textStyle.strikethrough},set strikethrough(G){this._textStyle.strikethrough=!!G;this._update()},get family(){return this._textStyle.family},set family(G){this._textStyle.family=G;this._update()},get lineHeight(){return this._textStyle.lineHeight},set lineHeight(G){this._textStyle.lineHeight=G;this._update()},get wrap(){return this._textStyle.wrap},set wrap(G){this._textStyle.wrap=!!G;this._update()},get maxLines(){return this._textStyle.maxLines},set maxLines(G){this._textStyle.maxLines=G;this._update()},get size(){return this._textStyle.size},set size(G){this._textStyle.size=G;this._update()},get locale(){return this._textStyle.locale},set locale(G){this._textStyle.locale=G;this._update()},get color(){if(this._color===undefined){var G=this;G._color=new n(function(){var H=this,I=G._textStyle.color;I.r=H.r;I.g=H.g;I.b=H.b;I.a=H.a;G._update()})}return this._color},set color(G){this.color.setProperties(G)},get align(){if(this._align===undefined){this._align=new B(this)}return this._align},set align(G){this.align.setProperties(G)},get shadow(){if(this._shadow===undefined){this._shadow=new z(this)}return this._shadow},set shadow(G){this.shadow.setProperties(G)},get edgeEffect(){if(this._edgeEffect===undefined){this._edgeEffect=new f(this)}return this._edgeEffect},set edgeEffect(G){this.edgeEffect.setProperties(G)},get cursor(){if(this._cursor===undefined){this._cursor=new d(this)}return this._cursor},set cursor(G){this.cursor.setProperties(G)},get truncation(){if(this._truncation===undefined){this._truncation=new A(this)}return this._truncation},set truncation(G){this.truncation.setProperties(G)},setProperties:function(I){var H=this,G=H._update;H._update=H._noop;H._setPropertiesDefault(I);H._update=G;H._update()},_update:function(){if(this._textStyle){this._proxyWidget.textStyle=this._textStyle}},_noop:function(){},_setPropertiesDefault:h,serialize:function(){var G=this,H={size:G.size,family:G.family,bold:G._bold,italic:G._italic,lineHeight:G.lineHeight,wrap:G.wrap,maxLines:G.maxLines,richText:G.richText,underline:G.underline,strikethrough:G.strikethrough};G._color&&(H.color=G._color.serialize());G._align&&(H.align=G._align.serialize());G._shadow&&(H.shadow=G._shadow.serialize());G._edgeEffect&&(H.edgeEffect=G._edgeEffect.serialize());G._truncation&&(H.truncation=G._truncation.serialize());return H}};function B(G){this._textProperty=G}B.prototype={_horizontal:"left",_vertical:"top",get horizontal(){return this._horizontal},set horizontal(G){var H=this;H._horizontal=G;H._update()},get vertical(){return this._vertical},set vertical(G){var H=this;H._vertical=G;H._update()},setProperties:function(H){var G=this;if(H.horizontal!==undefined){G._horizontal=H.horizontal}if(H.vertical!==undefined){G._vertical=H.vertical}G._update()},_update:function(){var G=this._textProperty;G._textStyle.align=p(this._horizontal,this._vertical);G._update()},serialize:function(){var G=this;return{horizontal:G._horizontal,vertical:G._vertical}}};function z(G){this._textProperty=G;G._textStyle.shadow={offsetX:0,offsetY:0,color:new gibbon.color}}z.prototype={get color(){if(this._color===undefined){var G=this;G._color=new n(function(){G._update()})}return this._color},set color(G){this.color.setProperties(G)},get offset(){if(this._offset===undefined){var G=this;G._offset=new D(null,function(H,I){G._update()})}return this._offset},set offset(G){this.offset.setProperties(G)},setProperties:function(G){if(G.color!==undefined){this.color.setProperties(G.color)}if(G.offset!==undefined){this.offset.setProperties(G.offset)}this._update()},_update:function(){var I=this._offset,G=this._color,H=this._textProperty._textStyle,J=H.shadow.color;if(I){H.shadow.offsetX=I.x;H.shadow.offsetY=I.y}if(G){J.r=G.r;J.g=G.g;J.b=G.b;J.a=G.a}this._textProperty._update()},serialize:function(){var G=this,H;G._color&&(H||(H={}))&&(H.color=G._color.serialize());G._offset&&(H||(H={}))&&(H.offset=G._offset.serialize());return H}};function f(G){this._textProperty=G;this._textStyle=G._textStyle;G._textStyle.edgeEffect={type:"none",width:1,outlineColor:new gibbon.color,lightColor:new gibbon.color,darkColor:new gibbon.color}}f.prototype={get type(){return this._textStyle.edgeEffect.type},set type(G){this._textStyle.edgeEffect.type=G;this._textProperty._update()},get width(){return this._textStyle.edgeEffect.width},set width(G){this._textStyle.edgeEffect.width=G;this._textProperty._update()},get outlineColor(){if(this._outlineColor===undefined){var G=this;G._outlineColor=new n(function(){G._outlineColor.dirty=true;G._update()})}return this._outlineColor},set outlineColor(G){this.outlineColor.setProperties(G)},get lightColor(){if(this._lightColor===undefined){var G=this;G._lightColor=new n(function(){G._lightColor.dirty=true;G._update()})}return this._lightColor},set lightColor(G){this.lightColor.setProperties(G)},get darkColor(){if(this._darkColor===undefined){var G=this;G._darkColor=new n(function(){G._darkColor.dirty=true;G._update()})}return this._darkColor},set darkColor(G){this.darkColor.setProperties(G)},setProperties:function(G){if(G.type){this.type=G.type}if(G.width){this.width=G.width}if(G.outlineColor!==undefined){this.outlineColor.setProperties(G.outlineColor)}if(G.lightColor!==undefined){this.lightColor.setProperties(G.lightColor)}if(G.darkColor!==undefined){this.darkColor.setProperties(G.darkColor)}if(G.offset!==undefined){this.offset.setProperties(shadow.offset)}this._update()},_update:function(){var G=this,H=G._textProperty._textStyle,I,J;I=this._outlineColor;if(I&&I.dirty){I.dirty=false;J=H.edgeEffect.outlineColor;J.r=I.r;J.g=I.g;J.b=I.b;J.a=I.a}I=this._lightColor;if(I&&I.dirty){I.dirty=false;J=H.edgeEffect.lightColor;J.r=I.r;J.g=I.g;J.b=I.b;J.a=I.a}I=this._darkColor;if(I&&I.dirty){I.dirty=false;J=H.edgeEffect.darkColor;J.r=I.r;J.g=I.g;J.b=I.b;J.a=I.a}this._textProperty._update()},serialize:function(){var G=this,H={type:G.type,width:G.width};G._outlineColor&&(H||(H={}))&&(H.outlineColor=G._outlineColor.serialize());G._lightColor&&(H||(H={}))&&(H.lightColor=G._lightColor.serialize());G._darkColor&&(H||(H={}))&&(H.darkColor=G._darkColor.serialize());return H}};function d(G){this._textProperty=G;this._textStyle=G._textStyle;G._textStyle.cursor={visible:false,position:0,interval:200,style:"default",color:new gibbon.color}}d.prototype={get visible(){return this._textStyle.cursor.visible},set visible(G){this._textStyle.cursor.visible=!!G;this._textProperty._update()},get position(){return this._textStyle.cursor.position},set position(G){this._textStyle.cursor.position=G;this._textProperty._update()},get style(){return this._textStyle.cursor.style},set style(G){this._textStyle.cursor.style=G;this._textProperty._update()},get color(){if(this._color===undefined){var G=this;G._color=new n(function(){G._color.dirty=true;G._update()})}return this._color},set color(G){this.color.setProperties(G)},setProperties:function(G){if(G.color!==undefined){this.color.setProperties(G.color)}if(G.offset!==undefined){this.offset.setProperties(G.offset)}this._update()},_update:function(){var G=this,H=G._textProperty._textStyle,I,J;I=this._color;if(I&&I.dirty){I.dirty=false;J=H.cursor.color;J.r=I.r;J.g=I.g;J.b=I.b;J.a=I.a}this._textProperty._update()},serialize:function(){var G=this,H={visible:G.visible,position:G.position,style:G.style};G._color&&(H||(H={}))&&(H.color=G._color.serialize());return H}};function A(G){this._textProperty=G;this._textStyle=G._textStyle;this._textStyle.truncation={position:"none"}}A.prototype={get position(){return this._textStyle.truncation.position},set position(G){this._textStyle.position=G;this._textProperty._update()},get ellipsis(){return this._textStyle.truncation.ellipsis},set ellipsis(G){this._textStyle.truncation.ellipsis=G;this._textProperty._update()},setProperties:function(G){if(G.position!==undefined){this._textStyle.truncation.position=G.position}if(G.ellipsis!==undefined){this._textStyle.truncation.ellipsis=G.ellipsis}this._textProperty._update()},serialize:function(){var G=this;return{position:G.position,ellipsis:G.ellipsis}}};function C(G){this._proxyWidget=G;this._layout={layout:"horizontal",align:["left","top"]}}C.prototype={get direction(){return this._layout.layout},set direction(G){this._layout.layout=G;this._update()},get align(){if(this._align===undefined){this._align=new t(this)}return this._align},set align(G){this.align.setProperties(G)},setProperties:function(I){var H=this,G=H._update;H._update=H._noop;if(I.direction!==undefined){H._layout.layout=I.direction}if(I.align!==undefined){H.align.setProperties(I.align)}H._update=G;H._update()},_updateAlign:function(){var G=this;G._layout.align[0]=G._align.horizontal=="center"?"center-horizontal":G._align.horizontal;G._layout.align[1]=G._align.vertical=="center"?"center-vertical":G._align.vertical;G._update()},_update:function(){this._proxyWidget.layout=this._layout},_noop:function(){},serialize:function(){var G=this,H={direction:G.direction};G._align&&(H.align=G._align.serialize());return H}};function t(G){this._layoutProperty=G}t.prototype={set vertical(G){this._vertical=G;this._layoutProperty._updateAlign()},get vertical(){return this._vertical||"top"},set horizontal(G){this._horizontal=G;this._layoutProperty._updateAlign()},get horizontal(){return this._horizontal||"left"},setProperties:function(G){if(G.horizontal!==undefined){this._horizontal=G.horizontal}if(G.vertical!==undefined){this._vertical=G.vertical}this._layoutProperty._updateAlign()},serialize:function(){var G=this;return{vertical:G._vertical,horizontal:G._horizontal}}};var j=function(H){var J=this,G=gibbon.Widget.create(),K,I,L;G.id=J.id;G.textContent=J.textContent;G.setProperties(J.serialize());if(J.mutations!==undefined){G.mutations=J.mutations}if(H){for(I=0,L=J.children.length;I<L;I++){K=J.children[I].clone(H);K.parent=G}}return G};var o={_x:0,_y:0,_drawOrder:0,_visible:true,_opacity:1,_stretch:0,_spacing:0,_init:function(){var G=this;G._proxy=gibbon.makeWidget();G._widgetIdCache={}},destroy:function(){var H=this.children,G;this.parent=undefined;for(G=H.length;--G>=0;){H[G].destroy()}},isAncestorOf:function(I){var H=this.children,G;if(H.indexOf(I)!=-1){return true}for(G=H.length;--G>=0;){if(H[G].isAncestorOf(I)){return true}}return false},setProperties:function(L,G){var J=this,M,H,I,N,K;for(H in L){M=J[H];if(H!=="children"){if(typeof M==="object"){M.setProperties&&M.setProperties(L[H])}else{J[H]=L[H]}}else{if(G===undefined||G){K=L.children;for(I=0,N=K.length;I<N;I++){child=gibbon.Widget.create(K[I],this);child.parent=J}}}}},get x(){return this._x},set x(G){this._x=G;this._proxy.x=G},get y(){return this._y},set y(G){this._y=G;this._proxy.y=G},get renderX(){return this._proxy.renderX},get renderY(){return this._proxy.renderY},get width(){return this._width},set width(G){var H=this.parent;this._width=e(G,H!==undefined?H.width:gibbon.scene.width);this._proxy.width=this._width},get height(){return this._height},set height(G){var H=this.parent;this._height=e(G,H!==undefined?H.height:gibbon.scene.height);this._proxy.height=this._height},get renderWidth(){return this._proxy.renderWidth},get renderHeight(){return this._proxy.renderHeight},get minSize(){if(this._minSize===undefined){this._minSize=new q(this._proxy,function(H,G){if(H!==undefined){this._proxyWidget.minWidth=H}if(G!==undefined){this._proxyWidget.minHeight=G}});this._minSize._width=undefined;this._minSize._height=undefined}return this._minSize},set minSize(G){this.minSize.setProperties(G)},get maxSize(){if(this._maxSize===undefined){this._maxSize=new q(this._proxy,function(H,G){if(H!==undefined){this._proxyWidget.maxWidth=H}if(G!==undefined){this._proxyWidget.maxHeight=G}});this._maxSize._width=undefined;this._maxSize._height=undefined}return this._maxSize},set maxSize(G){this.maxSize.setProperties(G)},get padding(){if(this._padding===undefined){this._padding=new s(this._proxy)}return this._padding},set padding(G){this.padding.setProperties(G)},get background(){if(this._background===undefined){this._background=new w(this,this._proxy.backgroundImage,"backgroundImageLoaded")}return this._background},set background(G){this.background.setProperties(G)},get text(){if(this._text===undefined){this._text=new l(this._proxy)}return this._text},set text(G){this.text.setProperties(G)},get layout(){if(this._layout===undefined){this._layout=new C(this._proxy)}return this._layout},set layout(G){this.layout.setProperties(G)},get transform(){if(this._transform===undefined){this._transform=new c(this._proxy)}return this._transform},set transform(G){this.transform.setProperties(G)},get transition(){if(this._transition===undefined){this._transition=new m(this)}return this._transition},set transition(G){this.transition.setProperties(G)},get drawOrder(){return this._drawOrder},set drawOrder(G){this._drawOrder=G;this._proxy.drawOrder=G},get visible(){return this._visible},set visible(G){this._visible=G;this._proxy.hidden=!G},get opacity(){return this._opacity},set opacity(G){this._opacity=G;this._proxy.opacity=G},get stretch(){return this._stretch},set stretch(G){this._stretch=G;this._proxy.layoutStretch=G},get spacing(){return this._spacing},set spacing(G){this._spacing=G;this._proxy.layoutSpacing=G},get clip(){return this._clip},set clip(G){this._clip=G;this._proxy.clip=G},get cache(){return this._cache},set cache(G){this._cache=G;this._proxy.cache=G},get opaque(){return this._opaque},set opaque(G){this._opaque=G;this._proxy.opaque=G},serialize:function(){var G=this,H={x:G._x,y:G._y,width:G._width,height:G._height,drawOrder:G._drawOrder,visible:G._visible,opacity:G._opacity,stretch:G._stretch,spacing:G._spacing,clip:G._clip,cache:G._cache,opaque:G._opaque};G._minSize&&(H.minSize=G._minSize.serialize());G._maxSize&&(H.maxSize=G._maxSize.serialize());G._padding&&(H.padding=G._padding.serialize());G._imageContent&&(H.imageContent=G._imageContent.serialize());G._background&&(H.background=G._background.serialize());G._text&&(H.text=G._text.serialize());G._layout&&(H.layout=G._layout.serialize());G._transform&&(H.transform=G._transform.serialize());G._transition&&(H.transition=G._transition.serialize());return H},loadImage:function(){var G=this._proxy.image;G&&G.reload()},appendChild:function(G){if(G){G.parent=this;return G}},removeChild:function(G){if(G){G.parent=undefined}},removeChildren:function(){var G=this.children;if(G!==undefined){while(G.length!=0){G[0].parent=undefined}}},startTransition:function(I,L,H,J,K,G){this._proxy.startAnimation(I,L,H,J,K,G)},stopTransition:function(H,G){this._proxy.stopAnimation(H,G)},getElementById:function(K){var H=this,G,J,I=H._widgetIdCache[K];if(I===undefined){for(G=0,J=H.children.length;G<J;G++){I=H.children[G];I=I.getElementById(K);if(I){return I}}}return I},getElementByProperty:function(K,I){var H=this,G,J;for(G=0,J=H.children.length;G<J;G++){el=H.children[G];if(el[K]==I){return el}el=el.getElementByProperty(K,I);if(el){return el}}},getElementsByProperty:function(M,K,G){var J=this,I=J.children,H,L;if(!G){G=[]}for(H=0,L=I.length;H<L;H++){el=I[H];if(el[M]==K){G.push(el)}el.getElementsByProperty(M,K,G)}return G},getElementsWithProperty:function(L,G){var J=this,I=J.children,H,K;if(!G){G=[]}for(H=0,K=I.length;H<K;H++){el=I[H];if(el.hasOwnProperty(L)){G.push(el)}el.getElementsWithProperty(L,G)}return G},forEachChild:function(G,I){var K=this.children,J,L,H;if(I){for(J=0,L=K.length;J<L;J++){H=K[J];G(H);H.forEachChild(G,true)}}else{for(J=0,L=K.length;J<L;J++){G(K[J])}}},cloneNode:j,clone:j};var E={id:{configurable:false,get:function(){return this._id},set:function(I){var G=this,H=G._parent;if(H!==undefined){if(G._id!==undefined&&H._widgetIdCache[G._id]===G){delete H._widgetIdCache[G._id]}if(I!==undefined){H._widgetIdCache[I]=G}}G._id=I;G._proxy.name=I}},children:{configurable:false,enumerable:false,writeable:false,get:function(){if(this._children===undefined){this._children=[]}return this._children}},style:{configurable:false,get:function(){throw"widget.style has been deprecated"},set:function(G){throw"widget.style has been deprecated"}},mutation:{configurable:false,get:function(){return this._mutation},set:function(N){var P=this,O=P.mutations&&P.mutations[N],H,M,J,G,K,L,I;P._mutation=N;if(O){for(K in O){J=P[K];if(K==="childMutations"){M=O.childMutations;for(G in M){if(G==="*"){for(L=0,I=P.children.length;L<I;L++){P.children[L].mutation=M[G]}}else{H=this.getElementById(G);if(H){H.mutation=M[G]}}}}else{if(typeof J==="object"){J.setProperties&&J.setProperties(O[K])}else{P[K]=O[K]}}}}}},textContent:{configurable:false,get:function(){return this._textContent||""},set:function(G){this._textContent=G;this._proxy.text=G}},imageContent:{configurable:false,set:function(G){this.imageContent.setProperties(G)},get:function(){if(this._imageContent===undefined){this._imageContent=new w(this,this._proxy.image,"imageLoaded")}return this._imageContent}},imageLoaded:{configurable:false,writeable:false,enumerable:false,get:function(){return this.imageContent.imageLoaded}},transitionEnd:{configurable:false,writeable:false,enumerable:false,get:function(){var G=this;if(this._transitionEnd===undefined){this._transitionEnd=new gibbon.Observable(function(H){var I=function(J){J.target=G;H.onNext(J)};G._proxy.addEventListener("animationFinished",I);return{dispose:function(){G._proxy.removeEventListener("animationFinished",I)}}})}return this._transitionEnd}},parent:{configurable:false,enumerable:false,get:function(){return this._parent},set:function(J){var I=this,H=I._parent,G;I._parent=J;if(H!==J){if(H!==undefined){G=H.children.indexOf(I);if(G!=-1){H.children.splice(G,1)}if(I.id!==undefined&&H._widgetIdCache[I.id]===I){delete H._widgetIdCache[I.id]}}if(J!==undefined){if(J.children===undefined){J.children=[]}J.children.push(I);I._proxy.parent=J._proxy;if(I.id!==undefined&&J._widgetIdCache[I.id]===undefined){J._widgetIdCache[I.id]=I}}else{I._proxy.parent=undefined}}}}};gibbon.Widget=Object.create(o,E);gibbon.Widget.create=function(H,I,G){var J=Object.create(gibbon.Widget);J._init();if(H){J._parent=I;J.setProperties(H,G);J._parent=undefined}return J}})();(function(){gibbon.parseMarkup=function(j,d){var l=[],o,h,f,e,m;for(f=0,e=j.length;f<e;f++){o=j[f];h=gibbon.Widget.create();h._parent=d;h.setProperties(o,false);h._parent=undefined;h.parent=d;var c=o.children;if(typeof c=="object"){gibbon.parseMarkup(c,h)}l.push(h)}return l};gibbon.createWidgets=function(c){return gibbon.parseMarkup([c])[0]}})();(function(d,f){function e(p){var l=e.options,j=l.parser[l.mode].exec(p),o={},n=14;while(n--){o[l.key[n]]=j[n]||""}o[l.q.name]={};o[l.key[12]].replace(l.q.parser,function(q,m,s){if(m){o[l.q.name][m]=s}});return o}e.options={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},mode:"loose",parser:{loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};function c(j){this._reset();f.nrdp.gibbon.location=j}var h={toString:function(){return f.nrdp.gibbon.location},assign:c,replace:c,reload:function(){this.href+=""},_reset:function(){delete this._uriParts},get _uri(){if(this._uriParts===undefined){this._uriParts=e(f.nrdp.gibbon.location)}return this._uriParts},get hash(){var j=this._uri.anchor;return j?"#"+j:j},get href(){return this.toString()},set href(j){this.assign(j)},get protocol(){var j=this._uri.protocol;j=j&&j.length>0?j+":":j;return j},get host(){var l=this.port,j=this.hostname;if(l){return j+":"+l}return j},get hostname(){return this._uri.host},get origin(){return this.protocol+"//"+h.host},get pathname(){return this._uri.path},get port(){return this._uri.port},get search(){var j=this._uri.query;return j.length?"?"+j:j}};Object.defineProperty(d,"location",{configurable:false,get:function(){return h},set:function(j){h.assign(j)}})})(gibbon,this);if(typeof window==="undefined"){function clearTimeout(c){if(c!==undefined){nrdp.gibbon.clearTimeout(c)}}function setTimeout(c,d){return nrdp.gibbon.setTimeout(c,d,true)}function setInterval(c,d){return nrdp.gibbon.setTimeout(function(){c();return d},d,false)}function clearInterval(c){if(c!==undefined){nrdp.gibbon.clearTimeout(c)}}var XMLHttpRequest=function(){this._id=0;this._eventListeners={};this._readyState=0;this.timeout=30000;this._responseText="";this._status=0;this._headers={}};XMLHttpRequest.prototype={constructor:XMLHttpRequest,get UNSENT(){return 0},get OPENED(){return 1},get HEADERS_RECEIVED(){return 2},get LOADING(){return 3},get DONE(){return 4},addEventListener:function(c,d){if(d){if(!this._eventListeners[c]){this._eventListeners[c]=[]}this._eventListeners[c].push(d)}},removeEventListener:function(d,f){if(f){var e=this._eventListeners[d];if(e){var c=e.indexOf(f);if(c>=0){if(e.length==1){delete this._eventListeners[d]}else{this._eventListeners[d].splice(c,1)}}}}},_callEventListeners:function(e){if(this["on"+e.type.toLowerCase()]){this["on"+e.type.toLowerCase()](e)}if(this._eventListeners[e.type]){var d=this._eventListeners[e.type].slice(0);for(var c=0;c<d.length;c++){var f=d[c];if(f){f(e)}}}},_setReadyState:function(c){this._readyState=c;this._callEventListeners({type:"readyStateChange"})},open:function(h,e,f,c,d){if(h!="GET"){throw"SyntaxError"}this._url=e;this._async=f;this._setReadyState(this.OPENED)},setRequestHeader:function(d,c){this._headers[d]=c},_finished:function(c){this._responseText=c;this._setReadyState(this.DONE)},send:function(c){if(c){throw"XMLHTTP send data not supported!!"}this.abort();var d=this;this._id=nrdp.gibbon.load({url:this._url,headers:this._headers,async:this._async},function(e){d._finished(e.data)});this._setReadyState(this.LOADING)},abort:function(){if(this._id){nrdp.gibbon.stopLoad(this._id);this._id=0}},get readyState(){return this._readyState},get responseXML(){return},get responseText(){return this._responseText},get response(){return this.responseText},get responseType(){return"text"},get status(){return this._status}};var localStorage={setItem:function(c,d){nrdp.storage.setItem(nrdp.storage.NO_DEVICE_ACCOUNT,c,d)},getItem:function(c){return nrdp.storage.getItem(nrdp.storage.NO_DEVICE_ACCOUNT,c)},removeItem:function(c){nrdp.storage.removeItem(nrdp.storage.NO_DEVICE_ACCOUNT,c)},clear:function(){nrdp.storage.clear()}};var sessionStorage={setItem:function(d,e){if(!nrdp.isReady){return}var c=nrdp.storage.transientData||{};if(c.sessionStorage===undefined){c.sessionStorage={}}c.sessionStorage[d]=e;nrdp.storage.transientData=c},getItem:function(d){if(!nrdp.isReady){return undefined}var c=nrdp.storage.transientData||{};if(c.sessionStorage===undefined){c.sessionStorage={}}return c.sessionStorage[d]},removeItem:function(d){if(!nrdp.isReady){return}var c=nrdp.storage.transientData||{};if(c.sessionStorage===undefined){c.sessionStorage={}}delete c.sessionStorage[d];nrdp.storage.transientData=c},clear:function(){delete nrdp.storage.transientData}};var navigator={userAgent:"Gibbon/nGn"};var screen={get width(){return nrdp.gibbon.scene.width},get height(){return nrdp.gibbon.scene.height}};var console={_log:function(c,d){nrdp.log[c](d.toString())},info:function(c){this._log("info",c)},log:function(c){this._log("debug",c)},error:function(c){this._log("error",c)},warn:function(c){this._log("warn",c)},debug:function(c){this._log("debug",c)}};var window=this;window.addEventListener=window.removeEventListener=function(){};var document={_listeners:{DOMContentLoaded:[],keyup:[],keydown:[]},removeEventListener:function(e,h){var d=this._listeners[e].length,f,c,j=e==="keyup"||e==="keydown"?"key":e;for(f=0;f<d;f++){c=this._listeners[e][f];if(c.orgListener===h){nrdp.gibbon.removeEventListener(j,c.nrdpListener);this._listeners[e].splice(f,1);break}}},addEventListener:function(){var d={keyup:"release",keydown:"press"};function c(){}function e(h,f){return function(l){var j=l.data;if(j.type===h){j.which=j.keyCode=j.code;j.preventDefault=c;f(j)}}}return function(f,l){var h,j;switch(f){case"DOMContentLoaded":j=l;if(nrdp.isReady){l()}else{nrdp.addEventListener("init",l)}break;case"keyup":case"keydown":j=e(d[f],l);nrdp.gibbon.addEventListener("key",j);break}if(this._listeners[f]){this._listeners[f].push({orgListener:l,nrdpListener:j})}}}(),get cookie(){return nrdp.gibbon.cookie},set cookie(d){nrdp.gibbon.cookie=d}};var Image=function(){this._src="";return this};Image.prototype={constructor:Image,get src(){return this._src},set src(d){var c=this;c._src=d;setTimeout(function(){c.onload()},5)}}}gibbon.reasons={PENDING:nrdp.gibbon.PENDING,SUCCESS:nrdp.gibbon.SUCCESS,NOT_SECURE_ERROR:nrdp.gibbon.NOT_SECURE_ERROR,FILE_ACCESS_ERROR:nrdp.gibbon.FILE_ACCESS_ERROR,DATA_URI_ERROR:nrdp.gibbon.DATA_URI_ERROR,DNS_ERROR:nrdp.gibbon.DNS_ERROR,CONNECT_ERROR:nrdp.gibbon.CONNECT_ERROR,TIMEOUT_ERROR:nrdp.gibbon.TIMEOUT_ERROR,SSL_HANDSHAKE_ERROR:nrdp.gibbon.SSL_HANDSHAKE_ERROR,SSL_CA_CERT_ERROR:nrdp.gibbon.SSL_CA_CERT_ERROR,SSL_CA_CERT_FILE_ERROR:nrdp.gibbon.SSL_CA_CERT_FILE_ERROR,CERT_STATUS_ERROR:nrdp.gibbon.CERT_STATUS_ERROR,SEND_ERROR:nrdp.gibbon.SEND_ERROR,RECV_ERROR:nrdp.gibbon.RECV_ERROR,NETWORK_ERROR:nrdp.gibbon.NETWORK_ERROR};var config=typeof config==="undefined"?{}:config;var application={};var util={};util.makeEnum=function(){var f={},e=0,c=arguments.length,d;for(;e<c;e++){d=arguments[e];f[d]=d}return f};(function(){var c;if(!Array.slice){c=Array.prototype.slice;Array.slice=function(f,e,d){return d==null?c.call(f,e):c.call(f,e,d)}}if(!Array.without){Array.without=function(l,j){var e=l.length,d=[],h=0,f;for(h;h<e;h++){f=l[h];if(f!==j){d.push(f)}}return d}}})();util.arrayToMapSelector=function(d,h,l){var e={},j;for(var f=0,c=d.length;f<c;f++){j=d[f];e[h?h(j):j]=l?l(j):j}return e};var NOOP=function(){};var UNIT={};util.isObjectLiteral=function(c){return c!==null&&typeof c==="object"&&c.constructor===Object};util.extendDeep=function(){var j=arguments[0],e=1,h=arguments.length,f=false,d,c,l,m;if(typeof j==="boolean"){f=j;j=arguments[1];e=2}for(;e<h;e++){if((d=arguments[e])!=null){for(c in d){if(f&&c in j){continue}m=d[c];if(j===m){continue}else{if(m!==undefined){l=j[c];if(l!==null&&m!==null&&typeof l==="object"&&typeof m==="object"){j[c]=util.extendDeep(f,{},l,m)}else{j[c]=m}}}}}}return j};(function(){var j={},n=/\b_super\b/,e={actions:true};function f(p,o){return function(){var s=this._super,q;this._super=o;q=p.apply(this,arguments);this._super=s;return q}}function l(o,p,t){var q,v,u,w,z,s;t=t||e;s=!!t.extendAll;for(q in p){v=p.__lookupGetter__(q);u=p.__lookupSetter__(q);if(v||u){v&&o.__defineGetter__(q,v);u&&o.__defineSetter__(q,u)}else{w=p[q];z=o[q];if(typeof w==="function"){if(n.test(w)){w=f(w,z||NOOP)}}else{if((s||t[q])&&util.isObjectLiteral(w)&&util.isObjectLiteral(z)){w=util.extendDeep({},z,w)}}o[q]=w}}}function h(){var p=Array.prototype.slice,o=p.call(arguments,1);return this.extend({init:function(){var q=p.call(arguments,0);this._super.apply(this,o.concat(q))}})}function d(q,p){var o=new this(j);l(o,q,p);return m(o)}function c(p,o){l(this.prototype,p,o);return this}function m(p){var o=function(){var q=this.init;if(q&&arguments[0]!==j){q.apply(this,arguments)}};if(p){o.prototype=p}o.prototype.constructor=o;o.extend=d;o.bind=h;o.mixin=c;return o}util.Class={create:m,mixin:l,extend:function(p,o){var q=m();q.prototype=new p;return q.extend(o)}};util.mixin=function(){if(util.log){util.log.warn("util.mixin is deprecated.  Please change your code to use util.Class.mixin()")}l.apply(null,arguments)}})();application.BindingsContainer=util.Class.create({Type:util.makeEnum("CLASS","FACTORY","POOL","SINGLETON"),init:function(c){this.bindings=c},setIfUnique:function(c,e){var d=!(c in this.bindings);if(d){this.set(c,e)}return d},set:function(c,d){this.bindings[c]=d},get:function(j){var h,c,m=this.bindings,e=this,f,d,l;if(m&&(h=m[j])&&(c=h.value)){f=Array.slice(arguments,1);d=this.Type;switch(h.type){case undefined:l=h._cachedValue||(h._cachedValue=c(util.arrayToMapSelector(h.dependsOn||[],null,function(n){return e.get(n)})));return l;case d.CLASS:return this._applyCtor(c,f);case d.FACTORY:return c.make.apply(c,f);case d.POOL:f.unshift(null);return c.borrow.apply(c,f);case d.SINGLETON:return c;default:util.log.debug("WARNING: application.Binding: Invalid binding type.");return null}}util.log.debug("WARNING: application.Binding#get did not return an object for key = "+j);return null},release:function(d,e){var c,f=this.bindings;if(f&&(c=f[d])){if(c.type===this.Type.POOL){c.value.release(e)}}},_applyCtor:function(){var c=function(){};return function(e,d){c.prototype=e.prototype;var f=new c;e.apply(f,d);return f}}()});config.binding={};application.Binding=new application.BindingsContainer(config.binding);if(window.nrdpPartner==undefined){window.nrdpPartner={}}if(nrdpPartner.Fonts==undefined){nrdpPartner.Fonts={WGL:"Arial_for_Netflix"}}(function(){var J={cultures:{}},p={en:{}};p["default"]=p.en;J.findClosestCulture=function(M){var K,N,O,L;if(typeof M==="string"){M=M.split(",")}if(!(M instanceof Array)){M=[M]}for(N=0,K=M.length;N<K;N++){O=this._findClosestCulture(M[N]);if(O&&O.fontGroup in nrdpPartner.Fonts){return O}}};J._findClosestCulture=function(K){var Q;if(!K){return this.culture||this.cultures["default"]}if(typeof K==="string"){K=K.split(",")}if(K instanceof Array){var M,U=this.cultures,S=K,P,N=S.length,T=[];for(P=0;P<N;P++){K=C(S[P]);var L,O=K.split(";");M=C(O[0]);if(O.length===1){L=1}else{K=C(O[1]);if(K.indexOf("q=")===0){K=K.substr(2);L=parseFloat(K,10);L=isNaN(L)?0:L}else{L=1}}T.push({lang:M,pri:L})}T.sort(function(W,V){if(W.pri===V.pri){return 0}return W.pri<V.pri?1:-1});for(P=0;P<N;P++){M=T[P].lang;Q=U[M];if(Q){return Q}}for(P=0;P<N;P++){M=T[P].lang;do{var R=M.lastIndexOf("-");if(R===-1){break}M=M.substr(0,R);Q=U[M];if(Q){return Q}}while(1)}}else{if(typeof K==="object"){return K}}return Q||null};J.preferCulture=function(K){this.culture=this.findClosestCulture(K)||this.cultures["default"]};J.addCulture=function(L,K){var M=typeof K.language==="object"?K.language:K,N;this.cultures[L]=M;if(K.strings){M.loaded=true;this.localize("ui-strings",L,K.strings)}if((N=this.cultures["default"])&&N.name===M.name){this.cultures["default"]=M}};J.localize=function(M,K,O){var N=K;if(typeof K!=="string"){N=this.culture&&this.culture.name?this.culture.name:this.culture||"default"}N=this.cultures[N]||{name:N};var L=p[N.name];if(arguments.length===3){if(!L){L=p[N.name]={}}L[M]=O}else{if(L){O=L[M]}if(typeof O==="undefined"){var P=p[N.language];if(P){O=P[M]}if(typeof O==="undefined"){O=p["default"][M]}}}return typeof O==="undefined"?null:O};J.format=function(L,M,K){K=this.findClosestCulture(K);if(typeof L==="number"){L=q(L,M,K)}else{if(L instanceof Date){L=v(L,M,K)}}return L};J.parseInt=function(M,L,K){return Math.floor(this.parseFloat(M,L,K))};J.parseFloat=function(X,R,Z){if(typeof R==="string"){Z=R;R=10}Z=this.findClosestCulture(Z);var ac=NaN,P=Z.numberFormat;if(X.indexOf(Z.numberFormat.currency.symbol)>-1){X=X.replace(Z.numberFormat.currency.symbol,"");X=X.replace(Z.numberFormat.currency["."],Z.numberFormat["."])}X=C(X);if(s.test(X)){ac=parseFloat(X,R)}else{if(!R&&F.test(X)){ac=parseInt(X,16)}else{var M=c(X,P,P.pattern[0]),ab=M[0],S=M[1];if(ab===""&&P.pattern[0]!=="-n"){M=c(X,P,"-n");ab=M[0];S=M[1]}ab=ab||"+";var W,T,aa=S.indexOf("e");if(aa<0){aa=S.indexOf("E")}if(aa<0){T=S;W=null}else{T=S.substr(0,aa);W=S.substr(aa+1)}var Y,Q,N=P["."],K=T.indexOf(N);if(K<0){Y=T;Q=null}else{Y=T.substr(0,K);Q=T.substr(K+N.length)}var U=P[","];Y=Y.split(U).join("");var O=U.replace(/\u00A0/g," ");if(U!==O){Y=Y.split(O).join("")}var V=ab+Y;if(Q!==null){V+="."+Q}if(W!==null){var L=c(W,P,"-n");V+="e"+(L[0]||"+")+L[1]}if(G.test(V)){ac=parseFloat(V)}}}return ac};J.parseDate=function(S,Q,O){O=this.findClosestCulture(O);var M,K,L;if(Q){if(typeof Q==="string"){Q=[Q]}if(Q.length){for(var P=0,N=Q.length;P<N;P++){var R=Q[P];if(R){M=f(S,R,O);if(M){break}}}}}else{L=O.calendar.patterns;for(K in L){M=f(S,L[K],O);if(M){break}}}return M||null};var w=/^\s+|\s+$/g,s=/^[+-]?infinity$/i,F=/^0x[a-f0-9]+$/i,G=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,A=Object.prototype.toString;function H(L,K){return L.indexOf(K)===0}function E(L,K){return L.substr(L.length-K.length)===K}function C(K){return(K+"").replace(w,"")}function u(N,L,M){for(var K=N.length;K<L;K++){N=M?"0"+N:N+"0"}return N}function l(Q,R,Y){var O=Y.groupSizes,K=O[0],L=1,V=Math.pow(10,R),M=Math.round(Q*V)/V;if(!isFinite(M)){M=Q}Q=M;var P=Q+"",X="",U=P.split(/e/i),W=U.length>1?parseInt(U[1],10):0;P=U[0];U=P.split(".");P=U[0];X=U.length>1?U[1]:"";var N;if(W>0){X=u(X,W,false);P+=X.slice(0,W);X=X.substr(W)}else{if(W<0){W=-W;P=u(P,W+1);X=P.slice(-W,P.length)+X;P=P.slice(0,-W)}}if(R>0){X=Y["."]+(X.length>R?X.slice(0,R):u(X,R))}else{X=""}var T=P.length-1,Z=Y[","],S="";while(T>=0){if(K===0||K>T){return P.slice(0,T+1)+(S.length?Z+S+X:X)}S=P.slice(T-K+1,T+1)+(S.length?Z+S:"");T-=K;if(L<O.length){K=O[L];L++}}return P.slice(0,T+1)+Z+S+X}function c(N,M,L){var P=M["-"],O=M["+"],K;switch(L){case"n -":P=" "+P;O=" "+O;case"n-":if(E(N,P)){K=["-",N.substr(0,N.length-P.length)]}else{if(E(N,O)){K=["+",N.substr(0,N.length-O.length)]}}break;case"- n":P+=" ";O+=" ";case"-n":if(H(N,P)){K=["-",N.substr(P.length)]}else{if(H(N,O)){K=["+",N.substr(O.length)]}}break;case"(n)":if(H(N,"(")&&E(N,")")){K=["-",N.substr(1,N.length-2)]}break}return K||["",N]}function q(V,U,O){if(!U||U==="i"){return O.name.length?V.toLocaleString():V.toString()}U=U||"D";var M=O.numberFormat,N=Math.abs(V),P=-1,T;if(U.length>1){P=parseInt(U.slice(1),10)}var S=U.charAt(0).toUpperCase(),W;switch(S){case"D":T="n";if(P!==-1){N=u(""+N,P,true)}if(V<0){N=-N}break;case"N":W=M;case"C":W=W||M.currency;case"P":W=W||M.percent;T=V<0?W.pattern[0]:W.pattern[1]||"n";if(P===-1){P=W.decimals}N=l(N*(S==="P"?100:1),P,W);break;default:throw"Bad number format specifier: "+S}var K=/n|\$|-|%/g,R="";for(;;){var Q=K.lastIndex,L=K.exec(T);R+=T.slice(Q,L?L.index:T.length);if(!L){break}switch(L[0]){case"n":R+=N;break;case"$":R+=M.currency.symbol;break;case"-":if(/[1-9]/.test(N)){R+=M["-"]}break;case"%":R+=M.percent.symbol;break}}return R}function n(M,K,L){return M<K||M>L}function e(P,N){var L=new Date,K=d(L);if(N<100){var M=P.twoDigitYearMax;M=typeof M==="string"?(new Date).getFullYear()%100+parseInt(M,10):M;var O=j(L,P,K);N+=O-O%100;if(N>M){N-=100}}return N}function d(M,L){if(!L){return 0}var P,O=M.getTime();for(var N=0,K=L.length;N<K;N++){P=L[N].start;if(P===null||O>=P){return N}}return 0}function h(K){return K.split("").join(" ").toUpperCase()}function m(K){var N=[];for(var M=0,L=K.length;M<L;M++){N[M]=h(K[M])}return N}function j(L,N,K,O){var M=L.getFullYear();if(!O&&N.eras){M-=N.eras[K].offset}return M}function z(O,N,L){var K,P=O.days,M=O._upperDays;if(!M){O._upperDays=M=[m(P.names),m(P.namesAbbr),m(P.namesShort)]}N=h(N);if(L){K=M[1].indexOf(N);if(K===-1){K=M[2].indexOf(N)}}else{K=M[0].indexOf(N)}return K}function t(R,Q,M){var K=R.months,L=R.monthsGenitive||R.months,O=R._upperMonths,P=R._upperMonthsGen;if(!O){R._upperMonths=O=[m(K.names),m(K.namesAbbr)];R._upperMonthsGen=P=[m(L.names),m(L.namesAbbr)]}Q=h(Q);var N=(M?O[1]:O[0]).indexOf(Q);if(N<0){N=(M?P[1]:P[0]).indexOf(Q)}return N}function D(N,K){var M=0,P=false;for(var O=0,L=N.length;O<L;O++){var Q=N.charAt(O);switch(Q){case"'":if(P){K.push("'")}else{M++}P=false;break;case"\\":if(P){K.push("\\")}P=!P;break;default:K.push(Q);P=false;break}}return M}function I(O,N){N=N||"F";var M,L=O.patterns,K=N.length;if(K===1){M=L[N];if(!M){throw"Invalid date format string '"+N+"'."}N=M}else{if(K===2&&N.charAt(0)==="%"){N=N.charAt(1)}}return N}function B(K,V){var X=K._parseRegExp;if(!X){K._parseRegExp=X={}}else{var O=X[V];if(O){return O}}var U=I(K,V).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),S=["^"],L=[],R=0,N=0,aa=o(),P;while((P=aa.exec(U))!==null){var Z=U.slice(R,P.index);R=aa.lastIndex;N+=D(Z,S);if(N%2){S.push(P[0]);continue}var M=P[0],Q=M.length,W;switch(M){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":W="(\\D+)";break;case"tt":case"t":W="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":W="(\\d{"+Q+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":W="(\\d\\d?)";break;case"zzz":W="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":W="([+-]?\\d\\d?)";break;case"/":W="(\\"+K["/"]+")";break;default:throw"Invalid date format pattern '"+M+"'.";break}if(W){S.push(W)}L.push(P[0])}D(U.slice(R),S);S.push("$");var Y=S.join("").replace(/\s+/g,"\\s+"),T={regExp:Y,groups:L};return X[V]=T}function o(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g}function f(ae,al,am){ae=C(ae);var X=am.calendar,ar=B(X,al),R=(new RegExp(ar.regExp)).exec(ae);if(R===null){return null}var an=ar.groups,ac=null,V=null,aq=null,ap=null,W=null,P=0,ah,ag=0,ao=0,K=0,M=null,Y=false;for(var ai=0,ak=an.length;ai<ak;ai++){var L=R[ai+1];if(L){var ad=an[ai],O=ad.length,Q=parseInt(L,10);switch(ad){case"dd":case"d":ap=Q;if(n(ap,1,31)){return null}break;case"MMM":case"MMMM":aq=t(X,L,O===3);if(n(aq,0,11)){return null}break;case"M":case"MM":aq=Q-1;if(n(aq,0,11)){return null}break;case"y":case"yy":case"yyyy":V=O<4?e(X,Q):Q;if(n(V,0,9999)){return null}break;case"h":case"hh":P=Q;if(P===12){P=0}if(n(P,0,11)){return null}break;case"H":case"HH":P=Q;if(n(P,0,23)){return null}break;case"m":case"mm":ag=Q;if(n(ag,0,59)){return null}break;case"s":case"ss":ao=Q;if(n(ao,0,59)){return null}break;case"tt":case"t":Y=X.PM&&(L===X.PM[0]||L===X.PM[1]||L===X.PM[2]);if(!Y&&(!X.AM||L!==X.AM[0]&&L!==X.AM[1]&&L!==X.AM[2])){return null}break;case"f":case"ff":case"fff":K=Q*Math.pow(10,3-O);if(n(K,0,999)){return null}break;case"ddd":case"dddd":W=z(X,L,O===3);if(n(W,0,6)){return null}break;case"zzz":var N=L.split(/:/);if(N.length!==2){return null}ah=parseInt(N[0],10);if(n(ah,-12,13)){return null}var T=parseInt(N[1],10);if(n(T,0,59)){return null}M=ah*60+(H(L,"-")?-T:T);break;case"z":case"zz":ah=Q;if(n(ah,-12,13)){return null}M=ah*60;break;case"g":case"gg":var Z=L;if(!Z||!X.eras){return null}Z=C(Z.toLowerCase());for(var aj=0,af=X.eras.length;aj<af;aj++){if(Z===X.eras[aj].name.toLowerCase()){ac=aj;break}}if(ac===null){return null}break}}}var U=new Date,ab,S=X.convert;ab=S?S.fromGregorian(U)[0]:U.getFullYear();if(V===null){V=ab}else{if(X.eras){V+=X.eras[ac||0].offset}}if(aq===null){aq=0}if(ap===null){ap=1}if(S){U=S.toGregorian(V,aq,ap);if(U===null){return null}}else{U.setFullYear(V,aq,ap);if(U.getDate()!==ap){return null}if(W!==null&&U.getDay()!==W){return null}}if(Y&&P<12){P+=12}U.setHours(P,ag,ao,K);if(M!==null){var aa=U.getMinutes()-(M+U.getTimezoneOffset());U.setHours(U.getHours()+parseInt(aa/60,10),aa%60)}return U}function v(ae,ai,aj){var W=aj.calendar,S=W.convert;if(!ai||!ai.length||ai==="i"){var al;if(aj&&aj.name.length){if(S){al=v(ae,W.patterns.F,aj)}else{var T=new Date(ae.getTime()),aa=d(ae,W.eras);T.setFullYear(j(ae,W,aa));al=T.toLocaleString()}}else{al=ae.toString()}return al}var af=W.eras,L=ai==="s";ai=I(W,ai);al=[];var P,ag=["0","00","000"],U,V,K=/([^d]|^)(d|dd)([^d]|$)/g,ak=0,ab=o(),M;function R(am,ap){var ao,an=am+"";if(ap>1&&an.length<ap){ao=ag[ap-2]+an;return ao.substr(ao.length-ap,ap)}else{ao=an}return ao}function ah(){if(U||V){return U}U=K.test(ai);V=true;return U}function N(an,am){if(M){return M[am]}switch(am){case 0:return an.getFullYear();case 1:return an.getMonth();case 2:return an.getDate()}}if(!L&&S){M=S.fromGregorian(ae)}for(;;){var Q=ab.lastIndex,Z=ab.exec(ai);var X=ai.slice(Q,Z?Z.index:ai.length);ak+=D(X,al);if(!Z){break}if(ak%2){al.push(Z[0]);continue}var ac=Z[0],O=ac.length,Y;switch(ac){case"ddd":case"dddd":Y=O===3?W.days.namesAbbr:W.days.names;al.push(Y[ae.getDay()]);break;case"d":case"dd":U=true;al.push(R(N(ae,2),O));break;case"MMM":case"MMMM":var ad=N(ae,1);al.push(W.monthsGenitive&&ah()?W.monthsGenitive[O===3?"namesAbbr":"names"][ad]:W.months[O===3?"namesAbbr":"names"][ad]);break;case"M":case"MM":al.push(R(N(ae,1)+1,O));break;case"y":case"yy":case"yyyy":ad=M?M[0]:j(ae,W,d(ae,af),L);if(O<4){ad=ad%100}al.push(R(ad,O));break;case"h":case"hh":P=ae.getHours()%12;if(P===0){P=12}al.push(R(P,O));break;case"H":case"HH":al.push(R(ae.getHours(),O));break;case"m":case"mm":al.push(R(ae.getMinutes(),O));break;case"s":case"ss":al.push(R(ae.getSeconds(),O));break;case"t":case"tt":ad=ae.getHours()<12?W.AM?W.AM[0]:" ":W.PM?W.PM[0]:" ";al.push(O===1?ad.charAt(0):ad);break;case"f":case"ff":case"fff":al.push(R(ae.getMilliseconds(),3).substr(0,O));break;case"z":case"zz":P=ae.getTimezoneOffset()/60;al.push((P<=0?"+":"-")+R(Math.floor(Math.abs(P)),O));break;case"zzz":P=ae.getTimezoneOffset()/60;al.push((P<=0?"+":"-")+R(Math.floor(Math.abs(P)),2)+":"+R(Math.abs(ae.getTimezoneOffset()%60),2));break;case"g":case"gg":if(W.eras){al.push(W.eras[d(ae,af)].name)}break;case"/":al.push(W["/"]);break;default:throw"Invalid date format pattern '"+ac+"'.";break}}return al.join("")}util.localization=J})();util.localization.cultures["default"]=util.localization.cultures.en;config.textTemplate={cacheSize:30};config.__defineGetter__("text",function(){return util.localization.localize("ui-strings")});var view={};view.AbstractUiWidget=util.Class.create({_visible:false,_focused:false,_rendered:false,_subscriptions:{},_model:null,_STATES:{},_CHILD_WIDGET_STATES:{},init:function(c){if(c){this.id=c}this._widgetCollection={}},set text(c){this._getWidget(this.id).textContent=c},set model(c){this._model=c},isVisible:function(){return this._visible},setVisible:function(c){if(!this._rendered&&c){this._render()}this._visible=c;this._getWidget(this.id).visible=c},setFocused:function(d){var c=d?"focused":"default";this._applyState(c);this._focused=d},isFocused:function(){return this._focused},_applyState:function(c){this._applyStateToElement(this._getWidget(this.id),this._STATES[c],c)},_applyStateToElement:function(d,e,c){if(e&&d){d.setProperties(e)}},_render:function(){if(!this._getWidget(this.id)){gibbon.parseMarkup([App.markup[this.id].scene],gibbon.getElementById(this.parentId))}this._applyState("default");this._rendered=true},setChildWidgetState:function(d,c){this._applyStateToElement(this._getWidget(d),this._CHILD_WIDGET_STATES[c],c)},resetChildWidgets:function(d){var f=this._getWidget(this.id).children,c=f.length,d=d?d:"default",e;for(e=0;e<c;e++){this.setChildWidgetState(f[e],d,this._CHILD_WIDGET_STATES[d])}},_getWidget:function(c){if(!this._widgetCollection[c]){this._widgetCollection[c]=gibbon.getElementById(c)}return this._widgetCollection[c]},_setWidgetMutations:function(f,e){if(!(f&&e)){return}var c=Math.min(f.length,e.length),d;for(d=0;d<c;d++){this._getWidget(f[d]).mutation=e[d]}},_reset:NOOP,renderModel:NOOP,getWidgetById:function(c){return this._getWidget(c)},getStates:function(){return this._STATES.keys},getChildStates:function(){return this._CHILD_WIDGET_STATES.keys},_subscribeToWidgetObservable:function(c,e,d,j){var h,f=this._getWidget(e);if(f&&f[d]&&c){if(!this._subscriptions[e]){this._subscriptions[e]={}}if(!this._subscriptions[e][d]){this._subscriptions[e][d]=[]}h=f[d].subscribe(function(l){j.call(c,l)});this._subscriptions[e][d].push({scope:c,disposable:h})}},_unsubscribeFromWidgetObservable:function(c,e,d){var h=this._subscriptions[e]&&this._subscriptions[e][d],f;while(f=h.pop()){if(f.scope==c){f.disposable.dispose()}}},subscribeToTransitionEnd:function(c,d,e){this._subscribeToWidgetObservable(c,d,"transitionEnd",e)},unsubscribeFromTransitionEnd:function(c,d){this._unsubscribeFromWidgetObservable(c,d,"transitionEnd")}});view.UIWidget=view.AbstractUiWidget.extend({});view.ButtonWidgetDefinitions={b2b:{"default":{width:316,height:58,text:{color:{r:235,g:235,b:235,a:255}},imageContent:{src:"http://cdn-0.nflximg.com/us/ffe/htmltvui/plus/720/common/bob_mdp_search_common_2.png",x:321,y:246}},focused:{text:{color:{r:34,g:34,b:34,a:255}},imageContent:{src:"http://cdn-0.nflximg.com/us/ffe/htmltvui/plus/720/common/bob_mdp_search_common_2.png",x:0,y:246}}},kids:{"default":{height:"100%",width:280,text:{color:{r:235,g:235,b:235,a:255},size:22,align:{vertical:"center",horizontal:"center"}},imageContent:{src:"http://cdn-0.nflximg.com/us/ffe/htmltvui/plus/720/common/bob_mdp_search_common_2.png",x:321,y:244}},focused:{text:{color:{r:34,g:34,b:34,a:255}},imageContent:{src:"http://cdn-0.nflximg.com/us/ffe/htmltvui/plus/720/common/bob_mdp_search_common_2.png",x:0,y:244}}},search:{"default":{height:"100%",width:280,text:{color:{r:235,g:235,b:235,a:255},size:22,align:{vertical:"center",horizontal:"center"}},imageContent:{src:"http://cdn-0.nflximg.com/us/ffe/htmltvui/plus/720/common/bob_mdp_search_common_2.png",x:280,y:176}},focused:{text:{color:{r:34,g:34,b:34,a:255}},imageContent:{src:"http://cdn-0.nflximg.com/us/ffe/htmltvui/plus/720/common/bob_mdp_search_common_2.png",x:0,y:176}}},"text-field":{"default":{padding:{left:5},x:2,y:2,width:376,height:40,background:{color:{r:129,g:129,b:128,a:255}},text:{align:{vertical:"center"},color:{r:0,g:0,b:0,a:255},size:20}},focused:{background:{color:{r:0,g:0,b:0,a:255}},text:{color:{r:255,g:255,b:255,a:255}}}},"password-field":{"default":{padding:{left:5},x:2,y:2,width:376,height:40,background:{color:{r:129,g:129,b:128,a:255}},text:{align:{vertical:"center"},color:{r:0,g:0,b:0,a:255},size:20}},focused:{background:{color:{r:0,g:0,b:0,a:255}},text:{color:{r:255,g:255,b:255,a:255}}}},"cs-buttons":{"default":{text:{color:{r:235,g:235,b:235,a:255}},imageContent:{src:""}},focused:{text:{color:{r:34,g:34,b:34,a:255}},imageContent:{src:"../img/720/dialog/DialogButton_Focus.png"}}}};view.ButtonWidgetFactory=function(e){var f=new view.UIWidget(e.id),h,d,c;if(!e){return null}f._STATES=e.states;f.text=e.text;return f};view.DialogWidget=view.AbstractUiWidget.extend({id:"app-dialog",init:function(){this._super();this._buttonWidgets={}},updateButtonState:function(d,e){var h=this._buttonWidgets,c=h["button-"+d],f=h["button-"+e];if(c){c.setFocused(false)}if(f){f.setFocused(true)}},renderModel:function(){var m=this._model,d=m.buttons,j=this._getWidget("app-dialog-message-text"),n=this._getWidget("app-dialog-code"),e=this._getWidget("app-dialog-buttons"),l,f,h,o,c,p=application.Binding;this._reset();j.textContent=m.message;gibbon.log("dialogModel.message = "+m.message);n.textContent=m.code||"";if(d&&d.length){l=this._model.buttons.items;h=l.length;for(f=0;f<h;f++){c="button-"+f;o=util.TemplateRegistry.createFromTemplate("template-dialog-button");o.id=c;o.parent=e;domButtonStates=util.TemplateRegistry.createFromTemplate("template-dialog-button-states");this._buttonWidgets[c]=p.get("BUTTON_WIDGET_FACTORY")({id:c,text:l[f].label,states:domButtonStates})}this.updateButtonState(-1,0)}},_reset:function(){util.log.debug("Widget._reset()");var c=this._getWidget("app-dialog-message-text");if(!c){throw new Error("No widget appMessageText")}c.textContent="";this._getWidget("app-dialog-buttons").removeChildren()}});(function(){var e=application.Binding,c=e.Type,d=c.CLASS;e.setIfUnique("DIALOG_WIDGET",{type:d,value:view.DialogWidget});e.setIfUnique("UI_WIDGET",{type:d,value:view.UIWidget});e.setIfUnique("BUTTON_WIDGET_FACTORY",{value:function(){return view.ButtonWidgetFactory}})})();var controller={};var state={};state.handleEvent=function(e,h){var j=this.actions,f,c,d;c=j&&(f=j[e.name])&&f.apply(this,h);if(c){return c}else{if(!e.bubbling){e.bubbling=true}}if(!e.cancelBubble){d=this.parentState;return d&&d.handleEvent(e,h)}};controller.ABaseUiCard=util.Class.create({_hasFocus:false,_onStack:false,view:function(){return this._view||(this._view=this._initView())},toString:function(){return this.id},handleEvent:state.handleEvent,canEnter:function(){return true},onEnter:function(d,e,c){this._hasFocus=true;this._onStack=true;this.view().focus()},onExit:function(d,c,e){delete this._hasFocus;if(d){delete this._onStack}this._onExit(d)},_onExit:function(d){var c=this._view;if(c){d?c.hide():c.blur()}}});controller.AUiCard=controller.ABaseUiCard.extend({_showing:false,show:function(){this._showing=true;this.view().show()},hide:function(){delete this._showing;this._onExit(true)},_onExit:function(d){var c=this._view;if(c){d&&!this._showing?c.hide():c.blur()}}});state.ICompoundState=util.Class.create();state.raiseEvent=function(c){var d=state.activeState;if(d){if(typeof c==="string"){c={name:c}}c.activeState=d;c.bubbling=false;return d.handleEvent(c,Array.slice(arguments,1))}};state.raiseEvent.subscribe=function(c){state.activeState=c;if(c.isRoot){state.rootState=c}};state.ACompoundState=state.ICompoundState.extend({id:"ACompoundState",raiseEvent:state.raiseEvent,_simpleHandleEvent:state.handleEvent,_onStack:false,_hasFocus:false,get stack(){var c=this._getCurrentState();return c?[c]:[]},_updateActiveState:function(j,e,d,h,f){var c;if(j.canEnter()){if(j!==this){j.parentState=this}this.raiseEvent.subscribe(j);if(d&&(h||!(f&&f.skipExit))){d.onExit(h,f,j)}j.onEnter(e,f,d);c=true}else{c=false}return c},canEnter:function(){return true},onEnter:function(e,f,d){var c=this._getCurrentState();this._onStack=true;this._hasFocus=true;if(c&&c!==this){c.parentState=this}this.raiseEvent.subscribe(c||this);if(c){c.onEnter(e,f,d)}},onExit:function(e,d,f){var c=this._getCurrentState();if(e){this._onStack=false}this._hasFocus=false;if(c){c.onExit(e,d,f)}},handleEvent:function(d,e){var c=this._getCurrentState(),f;if(!d.bubbling&&c){f=c.handleEvent(d,e)}if(!f){f=this._simpleHandleEvent(d,e)}return f},toDescription:function(){var c=this._getCurrentState(),d=this.id;if(c&&c!==this){d+=": ["+(c instanceof state.ICompoundState?c.toDescription():c.toString())+"]"}return d}});controller.ACompoundUiCard=state.ACompoundState.extend(controller.AUiCard.prototype).extend({id:"ACompoundUiCard",onEnter:function(d,e,c){this._super(d,e,c);state.ACompoundState.prototype.onEnter.call(this,d,e,c)},onExit:function(d,c,e){this._super(d,c,e);state.ACompoundState.prototype.onExit.call(this,d,c,e)}});var webapi={};util.NameValuePairParser=util.Class.create({init:function(c,d,e,f){this.delimiters=[d,c];this._encode=e;this._decode=f},get:function(h,e,d){var m=this.indexOf(h,e),c,l,j,f;if(m!==-1){l=this.delimiters;j=this._decode;m+=e.length+l[1].length;c=h.indexOf(l[0],m);f=h.substring(m,c!==-1?c:h.length);if(j){f=j(f)}}else{f=d!==undefined?d:null}return f},has:function(d,c){return this.indexOf(d,c)!==-1},indexOf:function(j,f){var e,l,m,c,h,d;if(j){l=this.delimiters;m=l[0];c=m.length;e=j.indexOf(f+l[1]);while(e>0&&!d){d=true;for(h=1;h<=c;h++){if(j[e-h]!==m[c-h]){e=j.indexOf(f+l[1],e+1);d=false;break}}}}else{e=-1}return e},add:function(f,c,e){var h=this.delimiters,d=this._encode;if(d){e=d(e)}if(f){f+=h[0]}return f+c+h[1]+e},remove:function(h,e){var l=this.indexOf(h,e),f,d,j,c;if(l!==-1){f=this.delimiters[0];d=h.indexOf(f,l);if(l>0){j=h.substr(0,l-1);c=0}else{j="";c=f.length}if(d!==-1){j+=h.substring(d+c)}h=j}return h},getMap:function(f){var d={},m,c,e,n,j,l,h;if(f){m=this.delimiters;f=f.split(m[0]);n=m[1];c=this._decode;e=Boolean(c);for(j=0,l=f.length;j<l;j++){h=f[j].split(n);d[h[0]]=h.length>1?e?c(h[1]):h[1]:""}}return d}});util.NameValuePair=util.Class.create({init:function(e,d,j,h,c,f){this._parser=new util.NameValuePairParser(e,d,c,f);this._allowDuplicates=h||false;this.pairs=j||""},toString:function(){return this.pairs},has:function(c){return this._parser.indexOf(this.pairs,c)!==-1},get:function(d,c){return this._parser.get(this.pairs,d,c)},add:function(c,d){if(!this._allowDuplicates){this.remove(c)}this.pairs=this._parser.add(this.pairs,c,d);return this},addAll:function(d){for(var c in d){this.add(c,d[c])}return this},remove:function(c){this.pairs=this._parser.remove(this.pairs,c);return this},getMap:function(){return this._parser.getMap(this.pairs)}});util.UrlParams=util.NameValuePair.extend({init:function(e,h,c){var d=function(j){return encodeURIComponent(j)},f=function(j){return decodeURIComponent(j)};if(e&&!c){if(e.indexOf("#")!==-1){e=e.split("#");this._hash=e[1];e=e[0]}if(e.indexOf("?")!==-1){e=e.split("?");this.baseUrl=e.shift();e=e.join("?")}else{if(e.indexOf("=")===-1){this.baseUrl=e;e=null}}}this._super("=","&",e,h,d,f)},getParams:function(){return this.pairs},toString:function(){var e=this._super(),c=this.baseUrl||"",d=this._hash;if(e){if(c){c+="?"}c+=e}if(d){c+="#"+d}return c}});util.Class.mixin(util,{get location(){return gibbon.location},set location(c){gibbon.location=c}});util.CurrentUrlParams=new util.UrlParams(util.location.href);config.environment={};(function(){var c=config.environment;c.type="prod";c.urlProtocol="https";c.cookieShopperId="NetflixShopperId";c.cookieShopperSecret="NetflixShopperSecret";c.cookieNetflixId="NetflixId";c.cookieNetflixIdSecure="SecureNetflixId";c.cookieVisitorId="VisitorId";c.webapiGlobalRouting="3.1".indexOf("3.0")!==0;c.webapiHostRewrite="true"==="true";c.webapiConfigAppName="htmltvui";c.webapiLoginUrl="";c.webapiListsTimeout=parseInt("10000",10);c.ecomApiHost="api-global.netflix.com";c.ecomDuxHost="signup.netflix.com";c.nmBeaconsHost="nmtracking.netflix.com";c.webapiHost=c.webapiGlobalRouting?"api-global.netflix.com":"api.netflix.com";c.pathEvaluator="lgmac-tmyles2/API.Next2_2013_03_11";c.pathEvaluatorRevision="";if("release"==="debug"){(function(d){var h=d.get("apiHost"),f=d.get("apiAppConfig"),e=d.get("pathevaluator"),j=d.get("pathevaluator_rev");if(h){c.webapiHost=h;c.webapiHostRewrite=true}if(f){c.webapiConfigAppName=f}if(e){c.pathEvaluator=e}if(j){c.pathEvaluatorRevision=j}})(util.CurrentUrlParams)}})();config.debugCodes={startup:{configService:"ui-100",uiLanguageText:"ui-103",nrdp:"ui-104",geoRejected:"ui-105",geoComingSoon:"ui-106",geoUnsupportedNrdp:"ui-107",serverRequest:"ui-108",languages:"ui-109",geolocation:"ui-110",uiExperience:"ui-111",browse:"ui-112",noConnectNoDiagnosis:"ui-113"},authentication:{currentUser:"ui-200",loginMaxRetries:"ui-201",secureNetflixIdMissing:"ui-202",missingTarget:"ui-203"},registration:{maxAccounts:"ui-500",network:"ui-501",bind:"ui-502",activate:"ui-503",rendezvous:"ui-504",unsupportedVersion:"ui-505"},merch:{topList:"ui-400"},account:{paymentHold:"ui-600"},player:{NFErr_MC_NCCP_NonRecoverableError:"aip-701",NFErr_MC_NCCP_PotentiallyRecoverableError:"aip-702",NFErr_MC_NCCP_CustomError:"aip-703",NFErr_MC_NCCP_RegistrationRequired:"aip-704",NFErr_MC_NCCP_CTicketRenewalRequired:"aip-705",NFErr_MC_NCCP_MTicketRenewalRequired:"aip-706",NFErr_MC_NCCP_ImpossibleImpossibility:"aip-707",NFErr_MC_NCCP_GetNewCredentials:"aip-708",NFErr_MC_NCCP_UnsupportedVersion:"aip-709",NFErr_MC_NCCP_CustomerCredentialsRenewalRequired:"aip-710a",NFErr_MC_NCCP_CannotObtainNpTicket:"aip-710b",NFErr_MC_NCCP_SecondaryCredentialsRenewalRequired:"aip-710c",NFErr_MC_NCCP_AbortPlayback:"aip-711",NFErr_MC_NCCP_StaleCredentials:"aip-712",NFErr_MC_AuthFailure:"tvp-801",NFErr_MC_InitStreamFailure:"tvp-802",NFErr_MC_StreamSetIncomplete:"tvp-803",NFErr_MC_ContentNotAvailable:"tvp-804",NFErr_MC_OpenDeviceFailure:"tvp-805",NFErr_MC_AcquireLicenseFailure:"tvp-806",NFErr_MC_RefuseToPlayNonDrmed:"tvp-810",NFErr_MC_EncodingError:"tvp-811",NFErr_MC_ConnectionFailure:"tvp-830",NFErr_MC_HttpServerError:"tvp-831",NFErr_MC_HttpClientError:"tvp-832",NFErr_MC_NCCP_Exception:"tvp-850",NFErr_MC_DevicePlaybackError:"tvp-851",NFErr_MC_DeviceDecryptionError:"tvp-852",NFErr_MC_SubtitleFailure:"tvp-860",NFErr_MalformedData:"nf-900"}};util.Error=util.Class.extend(Error,{init:function(e,d,f,c){if(e){this.message=e}if(d){this.debugCode=d}if(f){this.innerError=f}if(c){this.userMessage=c}}});(function(u,Y){var aC,aF=function(){},F=function(){return(new Date).getTime()},ae=function(aR,aQ){return aR===aQ},X=function(aQ){return aQ},aK=function(aQ){return aQ.toString()},ao=Object.prototype.hasOwnProperty,an=function(aT,aR){for(var aQ in aR){if(aQ!=="prototype"&&ao.call(aR,aQ)){aT[aQ]=aR[aQ]}}function aS(){this.constructor=aT}aS.prototype=aR.prototype;aT.prototype=new aS;aT.base=aR.prototype;return aT},Z=function(aS,aR){for(var aQ in aR){if(aQ!=="prototype"&&ao.call(aR,aQ)){aS[aQ]=aR[aQ]}}},z=Array.prototype.slice,n="Argument out of range",j="Object has been disposed";aC=u.Rx={Internals:{}};aC.VERSION="2.0.20327";var aL=function(aQ,aR){return function(){return aQ[aR].apply(aQ,arguments)}},T=function(aQ,aR){return c(function(aS){return new C(aR.getDisposable(),aQ.subscribe(aS))})},E=function(aQ,aR,aS){return c(function(aU){var aW=new m,aV=new m,aT=aS(aU,aW,aV);aW.disposable(aQ.materialize().select(function(aX){return{switchValue:function(aY){return aY(aX)}}}).subscribe(aT));aV.disposable(aR.materialize().select(function(aX){return{switchValue:function(aY,aZ){return aZ(aX)}}}).subscribe(aT));return new C(aW,aV)})};var R=function(aR){var aT=new Object(this);for(var aS=0,aQ=aT.length>>>0;aS<aQ;aS++){if(!aR.call(arguments[1],aT[aS],aS,aT)){return false}}return true},af=function(aR){var aU=[],aV,aT=new Object(this);for(var aS=0,aQ=aT.length>>>0;aS<aQ;aS++){aV=aT[aS];if(aR.call(arguments[1],aV,aS,aT)){aU.push(aV)}}return aU},av=function(aR){var aU=[],aT=new Object(this);for(var aS=0,aQ=aT.length>>>0;aS<aQ;aS++){aU.push(aR.call(arguments[1],aT[aS],aS,aT))}return aU};var aM=function(aR,aQ){return aR.length===1&&aR[aQ] instanceof Array?aR[aQ]:z.call(aR)},O=aC.Internals.List=function(){function aQ(aR){this.comparer=aR||ae;this.length=0;this.items=[]}aQ.fromArray=function(aT,aS){var aR=new aQ(aS);aR.items=aT.slice();aR.length=aT.length;return aR};aQ.prototype.add=function(aR){this.items[this.length++]=aR};aQ.prototype.removeAt=function(aR){if(aR<0||aR>=this.length){throw new Error(n)}this.items.splice(aR,1);this.length--};aQ.prototype.indexOf=function(aT){for(var aS=0,aR=this.items.length;aS<aR;aS++){if(this.comparer(aT,this.items[aS])){return aS}}return -1};aQ.prototype.remove=function(aS){var aR=this.indexOf(aS);if(aR===-1){return false}this.removeAt(aR);return true};aQ.prototype.clear=function(){this.items=[];this.length=0};aQ.prototype.item=function(aR,aS){if(aR<0||aR>=count){throw new Error(n)}if(aS===Y){return this.items[aR]}else{this.items[aR]=aS}};aQ.prototype.toArray=function(){return this.items.slice(0)};aQ.prototype.contains=function(aT){for(var aS=0,aR=this.items.length;aS<aR;aS++){if(this.comparer(aT,this.items[aS])){return true}}return false};return aQ}();var aE=function(aU,aR,aV,aS,aT){var aQ=aT;while(aQ>0){aV[aQ+aS-1]=aU[aQ+aR-1];aQ--}},aq=function(){function aQ(aS,aR){this.id=aS;this.value=aR}aQ.prototype.compareTo=function(aR){var aS=this.value.compareTo(aR.value);if(aS===0){aS=this.id-aR.id}return aS};return aQ}(),w=function(){function aQ(aR){this.items=new Array(aR);this.length=0}aQ.prototype.isHigherPriority=function(aS,aR){return this.items[aS].compareTo(this.items[aR])<0};aQ.prototype.percolate=function(aS){var aT,aR;if(aS>=this.length||aS<0){return}aT=aS-1>>1;if(aT<0||aT===aS){return}if(this.isHigherPriority(aS,aT)){aR=this.items[aS];this.items[aS]=this.items[aT];this.items[aT]=aR;this.percolate(aT)}};aQ.prototype.heapify=function(aS){var aV,aU,aT,aR;if(aS===Y){aS=0}if(aS>=this.length||aS<0){return}aU=2*aS+1;aT=2*aS+2;aV=aS;if(aU<this.length&&this.isHigherPriority(aU,aV)){aV=aU}if(aT<this.length&&this.isHigherPriority(aT,aV)){aV=aT}if(aV!==aS){aR=this.items[aS];this.items[aS]=this.items[aV];this.items[aV]=aR;this.heapify(aV)}};aQ.prototype.peek=function(){return this.items[0].value};aQ.prototype.removeAt=function(aS){var aR;this.items[aS]=this.items[--this.length];delete this.items[this.length];this.heapify();if(this.length<this.items.length>>2){aR=this.items;this.items=new Array(this.items.length>>1);aE(aR,0,this.items,0,this.length)}};aQ.prototype.dequeue=function(){var aR=this.peek();this.removeAt(0);return aR};aQ.prototype.enqueue=function(aT){var aS,aR;if(this.length>=this.items.length){aR=this.items;this.items=new Array(this.items.length*2);aE(aR,0,this.items,0,aR.length)}aS=this.length++;this.items[aS]=new aq(aQ.count++,aT);this.percolate(aS)};aQ.prototype.remove=function(aS){for(var aR=0;aR<this.length;aR++){if(this.items[aR].value===aS){this.removeAt(aR);return true}}return false};aQ.count=0;return aQ}();var C=aC.CompositeDisposable=function(){function aQ(){var aR=aM(arguments,0);this.disposables=O.fromArray(aR);this.isDisposed=false;this.length=this.disposables.length}aQ.prototype.add=function(aR){if(this.isDisposed){aR.dispose()}else{this.disposables.add(aR);this.length++}};aQ.prototype.remove=function(aR){var aS=false;if(!this.isDisposed){aS=this.disposables.remove(aR);this.length--}if(aS){aR.dispose()}return aS};aQ.prototype.dispose=function(){var aS;if(!this.isDisposed){this.isDisposed=true;aS=this.disposables.toArray();this.disposables.clear();this.length=0}if(aS){for(var aT=0,aR=aS.length;aT<aR;aT++){aS[aT].dispose()}}};aQ.prototype.clear=function(){var aS=this.disposables.toArray();this.disposables.clear();this.length=0;for(var aT=0,aR=aS.length;aT<aR;aT++){aS[aT].dispose()}};aQ.prototype.contains=function(aR){return this.disposables.contains(aR)};aQ.prototype.toArray=function(){return this.disposables.toArray()};return aQ}();var aG=aC.Disposable=function(){function aQ(aR){this.isDisposed=false;this.action=aR}aQ.prototype.dispose=function(){if(!this.isDisposed){this.action();this.isDisposed=true}};return aQ}(),ap=aG.create=function(aQ){return new aG(aQ)},aO=aG.empty=new aG(function(){});var m=aC.SingleAssignmentDisposable=function(){function aQ(){this.isDisposed=false;this.current=null}aQ.prototype.disposable=function(aR){return !aR?this.getDisposable():this.setDisposable(aR)};aQ.prototype.getDisposable=function(){return this.current};aQ.prototype.setDisposable=function(aR){if(this.current!==null){throw new Error("Disposable has already been assigned")}var aS=this.isDisposed;if(!aS){this.current=aR}if(aS&&aR!==null){aR.dispose()}};aQ.prototype.dispose=function(){var aR=null;if(!this.isDisposed){this.isDisposed=true;aR=this.current;this.current=null}if(aR!==null){aR.dispose()}};return aQ}();var ar=aC.SerialDisposable=function(){function aQ(){this.isDisposed=false;this.current=null}aQ.prototype.getDisposable=function(){return this.current};aQ.prototype.setDisposable=function(aS){var aT=this.isDisposed;var aR=null;if(!aT){aR=this.current;this.current=aS}if(aR!==null){aR.dispose()}if(aT&&aS!==null){aS.dispose()}};aQ.prototype.disposable=function(aR){if(!aR){return this.getDisposable()}else{this.setDisposable(aR)}};aQ.prototype.dispose=function(){var aR=null;if(!this.isDisposed){this.isDisposed=true;aR=this.current;this.current=null}if(aR!==null){aR.dispose()}};return aQ}();var ak=aC.RefCountDisposable=function(){function aQ(aS){this.underlyingDisposable=aS;this.isDisposed=false;this.isPrimaryDisposed=false;this.count=0}aQ.prototype.dispose=function(){if(!this.isDisposed){if(!this.isPrimaryDisposed){this.isPrimaryDisposed=true;if(this.count===0){this.isDisposed=true;this.underlyingDisposable.dispose()}}}};aQ.prototype.getDisposable=function(){return this.isDisposed?aO:new aR(this)};var aR=function(){function aS(aT){this.disposable=aT;this.disposable.count++;this.isInnerDisposed=false}aS.prototype.dispose=function(){if(!this.disposable.isDisposed){if(!this.isInnerDisposed){this.isInnerDisposed=true;this.disposable.count--;if(this.disposable.count===0&&this.disposable.isPrimaryDisposed){this.disposable.isDisposed=true;this.disposable.underlyingDisposable.dispose()}}}};return aS}();return aQ}();var v=function(){function aQ(aR,aS){this.scheduler=aR;this.disposable=aS;this.isDisposed=false}aQ.prototype.dispose=function(){var aR=this;this.scheduler.schedule(function(){if(!aR.isDisposed){aR.isDisposed=true;aR.disposable.dispose()}})};return aQ}();var az=function(){function aQ(aR,aU,aT,aV,aS){this.scheduler=aR;this.state=aU;this.action=aT;this.dueTime=aV;this.comparer=aS||function(aX,aW){return aX-aW};this.disposable=new m}aQ.prototype.invoke=function(){return this.disposable.disposable(this.invokeCore())};aQ.prototype.compareTo=function(aR){return this.comparer(this.dueTime,aR.dueTime)};aQ.prototype.isCancelled=function(){return this.disposable.isDisposed};aQ.prototype.invokeCore=function(){return this.action(this.scheduler,this.state)};return aQ}();var p=aC.Scheduler=function(){function aS(aW,aY,aX,aV){this.now=aW;this._schedule=aY;this._scheduleRelative=aX;this._scheduleAbsolute=aV}var aR=function(aV,a0){var aY=a0.first,aX=a0.second,aZ=new C,aW=function(a1){aX(a1,function(a2){var a4=false,a3=false,a5=aV.scheduleWithState(a2,function(a7,a6){if(a4){aZ.remove(a5)}else{a3=true}aW(a6);return aO});if(!a3){aZ.add(a5);a4=true}})};aW(aY);return aZ};var aQ=function(aV,a0){var aY=a0.first,aX=a0.second,aZ=new C,aW=function(a1){aX(a1,function(a2,a6){var a5,a4,a3;a4=false;a3=false;a5=aV.scheduleWithRelativeAndState(a2,a6,function(a8,a7){if(a4){aZ.remove(a5)}else{a3=true}aW(a7);return aO});if(!a3){aZ.add(a5);a4=true}})};aW(aY);return aZ};var aU=function(aV,a0){var aY=a0.first,aX=a0.second,aZ=new C,aW=function(a1){aX(a1,function(a2,a6){var a4=false,a3=false,a5=aV.scheduleWithAbsoluteAndState(a2,a6,function(a8,a7){if(a4){aZ.remove(a5)}else{a3=true}aW(a7);return aO});if(!a3){aZ.add(a5);a4=true}})};aW(aY);return aZ};var aT=function(aV,aW){aW();return aO};aS.prototype.schedule=function(aV){return this._schedule(aV,aT)};aS.prototype.scheduleWithState=function(aW,aV){return this._schedule(aW,aV)};aS.prototype.scheduleWithRelative=function(aW,aV){return this._scheduleRelative(aV,aW,aT)};aS.prototype.scheduleWithRelativeAndState=function(aW,aX,aV){return this._scheduleRelative(aW,aX,aV)};aS.prototype.scheduleWithAbsolute=function(aW,aV){return this._scheduleAbsolute(aV,aW,aT)};aS.prototype.scheduleWithAbsoluteAndState=function(aW,aX,aV){return this._scheduleAbsolute(aW,aX,aV)};aS.prototype.scheduleRecursive=function(aV){return this.scheduleRecursiveWithState(aV,function(aW,aX){aW(function(){aX(aW)})})};aS.prototype.scheduleRecursiveWithState=function(aW,aV){return this.scheduleWithState({first:aW,second:aV},function(aX,aY){return aR(aX,aY)})};aS.prototype.scheduleRecursiveWithRelative=function(aW,aV){return this.scheduleRecursiveWithRelativeAndState(aV,aW,function(aX,aY){aX(function(aZ){aY(aX,aZ)})})};aS.prototype.scheduleRecursiveWithRelativeAndState=function(aW,aX,aV){return this._scheduleRelative({first:aW,second:aV},aX,function(aY,aZ){return aQ(aY,aZ)})};aS.prototype.scheduleRecursiveWithAbsolute=function(aW,aV){return this.scheduleRecursiveWithAbsoluteAndState(aV,aW,function(aX,aY){aX(function(aZ){aY(aX,aZ)})})};aS.prototype.scheduleRecursiveWithAbsoluteAndState=function(aW,aX,aV){return this._scheduleAbsolute({first:aW,second:aV},aX,function(aY,aZ){return aU(aY,aZ)})};aS.now=F;aS.normalize=function(aV){if(aV<0){aV=0}return aV};return aS}();var at=function(){an(aQ,p);function aQ(){var aR=this;aQ.base.constructor.call(this,F,function(aT,aS){return aS(aR,aT)},function(aT,aU,aS){while(p.normalize(aU)>0){}return aS(aR,aT)},function(aT,aU,aS){return aR.scheduleWithRelativeAndState(aT,aU-aR.now(),aS)})}return aQ}(),al=p.Immediate=new at;var J=function(){function aQ(){N.queue=new w(4)}aQ.prototype.dispose=function(){N.queue=null};aQ.prototype.run=function(){var aS,aR=N.queue;while(aR.length>0){aS=aR.dequeue();if(!aS.isCancelled()){while(aS.dueTime-p.now()>0){}if(!aS.isCancelled()){aS.invoke()}}}};return aQ}(),N=function(){an(aQ,p);function aQ(){var aR=this;aQ.base.constructor.call(this,F,function(aT,aS){return aR.scheduleWithRelativeAndState(aT,0,aS)},function(aX,aY,aW){var aV=aR.now()+p.normalize(aY),aS=aQ.queue,aT=new az(aR,aX,aW,aV),aU;if(aS===null){aU=new J;try{aQ.queue.enqueue(aT);aU.run()}finally{aU.dispose()}}else{aS.enqueue(aT)}return aT.disposable},function(aT,aU,aS){return aR.scheduleWithRelativeAndState(aT,aU-aR.now(),aS)})}aQ.prototype.scheduleRequired=function(){return aQ.queue===null};aQ.prototype.ensureTrampoline=function(aR){if(this.scheduleRequired()){return this.schedule(aR)}else{return aR()}};aQ.queue=null;return aQ}(),ag=p.CurrentThread=new N;aC.VirtualTimeScheduler=function(){an(aQ,p);function aQ(aT,aS){var aR=this;this.clock=aT;this.comparer=aS;this.isEnabled=false;aQ.base.constructor.call(this,function(){return aR.toDateTimeOffset(aR.clock)},function(aV,aU){return aR.scheduleAbsolute(aV,aR.clock,aU)},function(aV,aW,aU){return aR.scheduleRelative(aV,aR.toRelative(aW),aU)},function(aV,aW,aU){return aR.scheduleRelative(aV,aR.toRelative(aW-aR.now()),aU)});this.queue=new w(1024)}aQ.prototype.scheduleRelative=function(aT,aU,aS){var aR=this.add(this.clock,aU);return this.scheduleAbsolute(aT,aR,aS)};aQ.prototype.start=function(){var aR;if(!this.isEnabled){this.isEnabled=true;do{aR=this.getNext();if(aR!==null){if(this.comparer(aR.dueTime,this.clock)>0){this.clock=aR.dueTime}aR.invoke()}else{this.isEnabled=false}}while(this.isEnabled)}};aQ.prototype.stop=function(){return this.isEnabled=false};aQ.prototype.advanceTo=function(aS){var aR;if(this.comparer(this.clock,aS)>=0){throw new Error(n)}if(!this.isEnabled){this.isEnabled=true;do{aR=this.getNext();if(aR!==null&&this.comparer(aR.dueTime,aS)<=0){if(this.comparer(aR.dueTime,this.clock)>0){this.clock=aR.dueTime}aR.invoke()}else{this.isEnabled=false}}while(this.isEnabled);return this.clock=aS}};aQ.prototype.advanceBy=function(aS){var aR=this.add(this.clock,aS);if(this.comparer(this.clock,aR)>=0){throw new Error(n)}return this.advanceTo(aR)};aQ.prototype.getNext=function(){var aR;while(this.queue.length>0){aR=this.queue.peek();if(aR.isCancelled()){this.queue.dequeue()}else{return aR}}return null};aQ.prototype.scheduleAbsolute=function(aU,aW,aT){var aR=this,aV=function(aY,aX){aR.queue.remove(aS);return aT(aY,aX)},aS=new az(aR,aU,aV,aW,aR.comparer);aR.queue.enqueue(aS);return aS.disposable};return aQ}();var G=function(){an(aQ,p);function aQ(aR){var aS=this;aQ.base.constructor.call(this,F,function(aU,aT){var aV=new m,aW=u.setTimeout(function(){aV.setDisposable(aT(aS,aU))},aR||0);return new C(aV,ap(function(){u.clearTimeout(aW)}))},function(aV,aW,aU){var aX=new m,aT=p.normalize(aW),aY=u.setTimeout(function(){aX.setDisposable(aU(aS,aV))},aT);return new C(aX,ap(function(){u.clearTimeout(aY)}))},function(aU,aV,aT){return aS.scheduleWithRelativeAndState(aU,aV-aS.now(),aT)})}return aQ}(),e=p.Timeout=new G;aC.TimeoutScheduler=G;var q=aC.Notification=function(){function aQ(){}aQ.prototype.accept=function(aS,aT,aR){if(arguments.length>1||typeof aS==="function"){return this._accept(aS,aT,aR)}else{return this._acceptObservable(aS)}};aQ.prototype.toObservable=function(aR){var aS=this;aR=aR||p.Immediate;return c(function(aT){return aR.schedule(function(){aS._acceptObservable(aT);if(aS.kind==="N"){aT.onCompleted()}})})};aQ.prototype.hasValue=false;aQ.prototype.equals=function(aR){var aS=aR===Y||aR===null?"":aR.toString();return this.toString()===aS};return aQ}();q.createOnNext=function(aQ){var aR=new q;aR.value=aQ;aR.hasValue=true;aR.kind="N";aR._accept=function(aS){return aS(this.value)};aR._acceptObservable=function(aS){return aS.onNext(this.value)};aR.toString=function(){return"OnNext("+this.value+")"};return aR};q.createOnError=function(aQ){var aR=new q;aR.exception=aQ;aR.kind="E";aR._accept=function(aS,aT){return aT(this.exception)};aR._acceptObservable=function(aS){return aS.onError(this.exception)};aR.toString=function(){return"OnError("+this.exception+")"};return aR};q.createOnCompleted=function(){var aQ=new q;aQ.kind="C";aQ._accept=function(aS,aT,aR){return aR()};aQ._acceptObservable=function(aR){return aR.onCompleted()};aQ.toString=function(){return"OnCompleted()"};return aQ};var am=aC.Internals.Enumerator=function(aR,aQ,aS){this.moveNext=aR;this.getCurrent=aQ;this.dispose=aS},s=am.create=function(aS,aQ,aT){var aR=false;aT||(aT=aF);return new am(function(){if(aR){return false}var aU=aS();if(!aU){aR=true;aT()}return aU},function(){return aQ()},function(){if(!aR){aT();aR=true}})},aB=aC.Internals.Enumerable=function(aQ){this.getEnumerator=aQ},Q=aB.prototype;Q.concat=function(){var aQ=this;return c(function(aT){var aR,aV=aQ.getEnumerator(),aS=false,aU=new ar;aR=al.scheduleRecursive(function(aX){var a0,a1,aZ,aW=false;if(!aS){try{aW=aV.moveNext();if(aW){a0=aV.getCurrent()}else{aV.dispose()}}catch(aY){aZ=aY;aV.dispose()}}else{return}if(aZ){aT.onError(aZ);return}if(!aW){aT.onCompleted();return}a1=new m;aU.disposable(a1);a1.disposable(a0.subscribe(function(a2){aT.onNext(a2)},function(a2){aT.onError(a2)},function(){aX()}))});return new C(aU,aR,ap(function(){aS=true;aV.dispose()}))})};Q.catchException=function(){var aQ=this;return c(function(aU){var aS,aW=aQ.getEnumerator(),aT=false,aV,aR;aV=new ar;aS=al.scheduleRecursive(function(aY){var a1,a2,a0,aX;aX=false;if(!aT){try{aX=aW.moveNext();if(aX){a1=aW.getCurrent()}}catch(aZ){a0=aZ}}else{return}if(a0){aU.onError(a0);return}if(!aX){if(aR){aU.onError(aR)}else{aU.onCompleted()}return}a2=new m;aV.disposable(a2);a2.disposable(a1.subscribe(function(a3){aU.onNext(a3)},function(a3){aR=a3;aY()},function(){aU.onCompleted()}))});return new C(aV,aS,ap(function(){aT=true}))})};var ai=aB.repeat=function(aR,aQ){if(aQ===Y){aQ=-1}return new aB(function(){var aT,aS=aQ;return s(function(){if(aS===0){return false}if(aS>0){aS--}aT=aR;return true},function(){return aT})})},aN=aB.forEach=function(aR,aQ){aQ||(aQ=X);return new aB(function(){var aT,aS=-1;return s(function(){if(++aS<aR.length){aT=aQ(aR[aS],aS);return true}return false},function(){return aT})})};var aa=aC.Observer=function(){},aj=aC.Internals.AbstractObserver=function(){an(aQ,aa);function aQ(){this.isStopped=false}aQ.prototype.onNext=function(aR){if(!this.isStopped){this.next(aR)}};aQ.prototype.onError=function(aR){if(!this.isStopped){this.isStopped=true;this.error(aR)}};aQ.prototype.onCompleted=function(){if(!this.isStopped){this.isStopped=true;this.completed()}};aQ.prototype.dispose=function(){this.isStopped=true};return aQ}();var f=function(){an(aQ,aj);function aQ(aS,aT,aR){aQ.base.constructor.call(this);this._onNext=aS;this._onError=aT;this._onCompleted=aR}aQ.prototype.next=function(aR){this._onNext(aR)};aQ.prototype.error=function(aR){this._onError(aR)};aQ.prototype.completed=function(){this._onCompleted()};return aQ}();var aH=aC.Internals.BinaryObserver=function(){an(aQ,aa);function aQ(aS,aR){if(typeof aS==="function"&&typeof aR==="function"){this.leftObserver=aI(aS);this.rightObserver=aI(aR)}else{this.leftObserver=aS;this.rightObserver=aR}}aQ.prototype.onNext=function(aS){var aR=this;return aS.switchValue(function(aT){return aT.accept(aR.leftObserver)},function(aT){return aT.accept(aR.rightObserver)})};aQ.prototype.onError=function(){};aQ.prototype.onCompleted=function(){};return aQ}();var ah=function(){an(aQ,aj);function aQ(aS,aR){this.scheduler=aS;this.observer=aR;this.isAcquired=false;this.hasFaulted=false;this.queue=[];this.disposable=new ar}aQ.prototype.ensureActive=function(){var aR=false,aS=this;if(!this.hasFaulted&&this.queue.length>0){aR=!this.isAcquired;this.isAcquired=true}if(aR){this.disposable.disposable(this.scheduler.scheduleRecursive(function(aU){var aT;if(aS.queue.length>0){aT=aS.queue.shift()}else{aS.isAcquired=false;return}try{aT()}catch(aV){aS.queue=[];aS.hasFaulted=true;throw aV}aU()}))}};aQ.prototype.next=function(aS){var aR=this;this.queue.push(function(){aR.observer.onNext(aS)})};aQ.prototype.error=function(aS){var aR=this;this.queue.push(function(){aR.observer.onError(aS)})};aQ.prototype.completed=function(){var aR=this;this.queue.push(function(){aR.observer.onCompleted()})};aQ.prototype.dispose=function(){aQ.base.dispose.call(this);this.disposable.dispose()};return aQ}();var au=aa.create=function(aR,aS,aQ){aR||(aR=aF);aS||(aS=function(aT){throw aT});aQ||(aQ=aF);return new f(aR,aS,aQ)},aw=aa.fromNotifier=function(aQ){return new f(function(aR){return aQ(q.createOnNext(aR))},function(aR){return aQ(q.createOnError(aR))},function(){return aQ(q.createOnCompleted())})},aI=function(aQ){return new f(function(aR){aQ(q.createOnNext(aR))},function(aR){aQ(q.createOnError(aR))},function(){aQ(q.createOnCompleted())})};aa.prototype.toNotifier=function(){var aQ=this;return function(aR){return aR.accept(aQ)}};aa.prototype.asObserver=function(){var aQ=this;return new f(function(aR){return aQ.onNext(aR)},function(aR){return aQ.onError(aR)},function(){return aQ.onCompleted()})};var I=aC.Observable=function(){function aQ(){}aQ.prototype.subscribe=function(aS,aU,aR){var aT;if(arguments.length===0||arguments.length>1||typeof aS==="function"){aT=au(aS,aU,aR)}else{aT=aS}return this._subscribe(aT)};return aQ}(),t=I.prototype,P=function(){an(aQ,I);function aQ(aR){aQ.base.constructor.call(this);this._subscribe=function(aS){var aT=new W(aS);if(ag.scheduleRequired()){ag.schedule(function(){aT.disposable(aR(aT))})}else{aT.disposable(aR(aT))}return aT}}aQ.prototype._subscribe=function(aR){return this._subscribe(aR)};return aQ}(),W=function(){an(aQ,aj);function aQ(aR){aQ.base.constructor.call(this);this.observer=aR;this.m=new m}aQ.prototype.disposable=function(aR){return this.m.disposable(aR)};aQ.prototype.next=function(aR){this.observer.onNext(aR)};aQ.prototype.error=function(aR){this.observer.onError(aR);this.m.dispose()};aQ.prototype.completed=function(){this.observer.onCompleted();this.m.dispose()};aQ.prototype.dispose=function(){aQ.base.dispose.call(this);this.m.dispose()};return aQ}();var o=function(){an(aQ,I);function aQ(aT,aS,aR){aQ.base.constructor.call(this);this.key=aT;this.underlyingObservable=!aR?aS:c(function(aU){return new C(aR.getDisposable(),aS.subscribe(aU))})}aQ.prototype._subscribe=function(aR){return this.underlyingObservable.subscribe(aR)};return aQ}();var aP=aC.ConnectableObservable=function(){an(aQ,I);function aQ(aT,aR){var aS={subject:aR,source:aT.asObservable(),hasSubscription:false,subscription:null};this.connect=function(){if(!aS.hasSubscription){aS.hasSubscription=true;aS.subscription=new C(aS.source.subscribe(aS.subject),ap(function(){aS.hasSubscription=false}))}return aS.subscription};this._subscribe=function(aU){return aS.subject.subscribe(aU)}}aQ.prototype.connect=function(){return this.connect()};aQ.prototype.refCount=function(){var aT=null,aR=0,aS=this;return c(function(aU){var aV,aW;aR++;aV=aR===1;aW=aS.subscribe(aU);if(aV){aT=aS.connect()}return ap(function(){aW.dispose();aR--;if(aR===0){aT.dispose()}})})};aQ.prototype._subscribe=function(aR){return this._subscribe(aR)};return aQ}();var ax=function(){function aQ(aS,aR){this.subject=aS,this.observer=aR}aQ.prototype.dispose=function(){if(!this.subject.isDisposed&&this.observer!==null){this.subject.observers.remove(this.observer);this.observer=null}};return aQ}(),aJ=aC.Subject=function(){an(aQ,I);Z(aQ,aa);function aQ(){aQ.base.constructor.call(this);this.isDisposed=false,this.isStopped=false,this.observers=new O}var aR=function(){if(this.isDisposed){throw new Error(j)}};aQ.prototype.onCompleted=function(){var aU;aR.call(this);if(!this.isStopped){aU=this.observers.toArray();this.observers=new O;this.isStopped=true}if(aU){for(var aT=0,aS=aU.length;aT<aS;aT++){aU[aT].onCompleted()}}};aQ.prototype.onError=function(aU){var aV;aR.call(this);if(!this.isStopped){aV=this.observers.toArray();this.observers=new O;this.isStopped=true;this.exception=aU}if(aV){for(var aT=0,aS=aV.length;aT<aS;aT++){aV[aT].onError(aU)}}};aQ.prototype.onNext=function(aV){var aU;aR.call(this);if(!this.isStopped){aU=this.observers.toArray()}if(aU){for(var aT=0,aS=aU.length;aT<aS;aT++){aU[aT].onNext(aV)}}};aQ.prototype._subscribe=function(aS){aR.call(this);if(!this.isStopped){this.observers.add(aS);return new ax(this,aS)}if(this.exception){aS.onError(this.exception);return aO}aS.onCompleted();return aO};aQ.prototype.dispose=function(){this.isDisposed=true;this.observers=null};aQ.create=function(aS,aT){return new B(aS,aT)};return aQ}();var ac=aC.AsyncSubject=function(){an(aQ,I);Z(aQ,aa);function aQ(){aQ.base.constructor.call(this);this.isDisposed=false,this.isStopped=false,this.value=null,this.hasValue=false,this.observers=new O,this.exception=null}var aR=function(){if(this.isDisposed){throw new Error(j)}};aQ.prototype.onCompleted=function(){var aT=false,aX,aW,aU,aV,aS;aR.call(this);if(!this.isStopped){aW=this.observers.toArray();this.observers=new O;this.isStopped=true;aU=this.value;aT=this.hasValue}if(aW){if(aT){for(aV=0,aS=aW.length;aV<aS;aV++){aX=aW[aV];aX.onNext(aU);aX.onCompleted()}}else{for(aV=0,aS=aW.length;aV<aS;aV++){aW[aV].onCompleted()}}}};aQ.prototype.onError=function(aU){var aV;aR.call(this);if(!this.isStopped){aV=this.observers.toArray();this.observers=new O;this.isStopped=true;this.exception=aU}if(aV){for(var aT=0,aS=aV.length;aT<aS;aT++){aV[aT].onError(aU)}}};aQ.prototype.onNext=function(aS){aR.call(this);if(!this.isStopped){this.value=aS;this.hasValue=true}};aQ.prototype._subscribe=function(aU){var aV,aS,aT;aR.call(this);if(!this.isStopped){this.observers.add(aU);return new ax(this,aU)}aV=this.exception;aS=this.hasValue;aT=this.value;if(aV){aU.onError(aV)}else{if(aS){aU.onNext(aT);aU.onCompleted()}else{aU.onCompleted()}}return aO};aQ.prototype.dispose=function(){this.isDisposed=true;this.observers=null;this.exception=null;this.value=null};return aQ}();var D=aC.BehaviorSubject=function(){an(aR,I);Z(aR,aa);function aR(aS){aR.base.constructor.call(this);this.value=aS,this.observers=new O,this.isDisposed=false,this.isStopped=false,this.exception=null}var aQ=function(){if(this.isDisposed){throw new Error(j)}};aR.prototype.onCompleted=function(){var aU;aQ.call(this);if(!this.isStopped){aU=this.observers.toArray();this.observers=new O;this.isStopped=true}if(aU){for(var aT=0,aS=aU.length;aT<aS;aT++){aU[aT].onCompleted()}}};aR.prototype.onError=function(aT){var aV;aQ.call(this);if(!this.isStopped){aV=this.observers.toArray();this.observers=new O;this.isStopped=true;this.exception=aT}if(aV){for(var aU=0,aS=aV.length;aU<aS;aU++){aV[aU].onError(aT)}}};aR.prototype.onNext=function(aV){var aU;aQ.call(this);if(!this.isStopped){this.value=aV;aU=this.observers.toArray()}if(aU){for(var aT=0,aS=aU.length;aT<aS;aT++){aU[aT].onNext(aV)}}};aR.prototype._subscribe=function(aS){var aT;aQ.call(this);if(!this.isStopped){this.observers.add(aS);aS.onNext(this.value);return new ax(this,aS)}aT=this.exception;if(aT){aS.onError(aT)}else{aS.onCompleted()}return aO};aR.prototype.dispose=function(){this.isDisposed=true;this.observers=null;this.value=null;this.exception=null};return aR}();var A=aC.ReplaySubject=function(){an(aR,I);Z(aR,I);function aR(aV,aU,aT){this.bufferSize=aV===Y?Number.MAX_VALUE:aV;this.window=aU===Y?Number.MAX_VALUE:aU;this.scheduler=aT||ag;this.q=[];this.observers=new O;this.isStopped=false;this.isDisposed=false}var aQ=function(){if(this.isDisposed){throw new Error(j)}};aR.prototype._trim=function(aV){var aU=this.isStopped?1:0,aT=aU+this.bufferSize;if(aT<this.bufferSize){aT=this.bufferSize}while(this.q.length>aT){this.q.shift()}while(this.q.length>aU&&aV-this.q[0].timestamp>this.window){this.q.shift()}};aR.prototype._enqueue=function(aV){var aT=this.scheduler.now(),aU={value:aV,timestamp:aT};this.q.push(aU);this._trim(aT)};aR.prototype.onNext=function(aW){var aX,aU,aV,aT;aQ.call(this);if(!this.isStopped){aX=this.observers.toArray();this._enqueue(q.createOnNext(aW));for(aV=0,aT=aX.length;aV<aT;aV++){aU=aX[aV];aU.onNext(aW)}}if(aX){for(aV=0,aT=aX.length;aV<aT;aV++){aU=aX[aV];aU.ensureActive()}}};aR.prototype.onError=function(aU){var aW,aV,aT;aQ.call(this);if(!this.isStopped){this.isStopped=true;this._enqueue(q.createOnError(aU));aW=this.observers.toArray();for(aV=0,aT=aW.length;aV<aT;aV++){aW[aV].onError(aU)}this.observers=new O}if(aW){for(aV=0,aT=aW.length;aV<aT;aV++){aW[aV].ensureActive()}}};aR.prototype.onCompleted=function(){var aV,aU,aT;aQ.call(this);if(!this.isStopped){this.isStopped=true;this._enqueue(q.createOnCompleted());aV=this.observers.toArray();for(aU=0,aT=aV.length;aU<aT;aU++){aV[aU].onCompleted()}this.observers=new O}if(aV){for(aU=0,aT=aV.length;aU<aT;aU++){aV[aU].ensureActive()}}};aR.prototype._subscribe=function(aU){var aX=new ah(this.scheduler,aU),aW=new aS(this,aX);aQ.call(this);this._trim(this.scheduler.now());this.observers.add(aX);for(var aV=0,aT=this.q.length;aV<aT;aV++){this.q[aV].value.accept(aX)}aX.ensureActive();return aW};aR.prototype.dispose=function(){this.isDisposed=true;this.observers=null};var aS=function(){function aT(aV,aU){this.subject=aV,this.observer=aU}aT.prototype.dispose=function(){this.observer.dispose();if(!this.subject.isDisposed){this.subject.observers.remove(this.observer)}};return aT}();return aR}();var B=function(){an(aQ,I);Z(aQ,aa);function aQ(aR,aS){this.observer=aR;this.observable=aS}aQ.prototype.onCompleted=function(){return this.observer.onCompleted()};aQ.prototype.onError=function(aR){return this.observer.onError(aR)};aQ.prototype.onNext=function(aR){return this.observer.onNext(aR)};aQ.prototype._subscribe=function(aR){return this.observable.subscribe(aR)};return aQ}();I.start=function(aT,aQ,aR,aS){aR||(aR=[]);return H(aT,aS).apply(aQ,aR)};var H=I.toAsync=function(aR,aQ){aQ||(aQ=e);return function(){var aU=new ac,aT=function(){var aW;try{aW=aR.apply(this,arguments)}catch(aX){aU.onError(aX);return}aU.onNext(aW);aU.onCompleted()},aS=z.call(arguments),aV=this;aQ.schedule(function(){aT.apply(aV,aS)});return aU}};t.multicast=function(aS,aQ){var aR=this;return typeof aS==="function"?c(function(aU){var aT=aR.multicast(aS());return new C(aQ(aT).subscribe(aU),aT.connect())}):new aP(aR,aS)};t.publish=function(aQ){return !aQ?this.multicast(new aJ):this.multicast(function(){return new aJ},aQ)};t.publishLast=function(aQ){return !aQ?this.multicast(new ac):this.multicast(function(){return new ac},aQ)};t.replay=function(aQ,aT,aS,aR){return !aQ||aQ===null?this.multicast(new A(aT,aS,aR)):this.multicast(function(){return new A(aT,aS,aR)},aQ)};t.publishValue=function(aR,aQ){return typeof aR==="function"?this.multicast(function(){return new D(aQ)},aR):this.multicast(new D(aR))};var U=I.never=function(){return c(function(){return aO})},l=I.empty=function(aQ){aQ||(aQ=al);return c(function(aR){return aQ.schedule(function(){aR.onCompleted()})})},ab=I.returnValue=function(aR,aQ){aQ||(aQ=al);return c(function(aS){return aQ.schedule(function(){aS.onNext(aR);aS.onCompleted()})})},aD=I.throwException=function(aR,aQ){aQ||(aQ=al);return c(function(aS){return aQ.schedule(function(){aS.onError(aR)})})};I.generate=function(aQ,aU,aR,aS,aT){aT||(aT=ag);return c(function(aV){var aX=true,aW=aQ;return aT.scheduleRecursive(function(aZ){var a1,aY;try{if(aX){aX=false}else{aW=aR(aW)}a1=aU(aW);if(a1){aY=aS(aW)}}catch(a0){aV.onError(a0);return}if(a1){aV.onNext(aY);aZ()}else{aV.onCompleted()}})})};var ay=I.defer=function(aQ){return c(function(aS){var aR;try{aR=aQ()}catch(aT){return aD(aT).subscribe(aS)}return aR.subscribe(aS)})};I.using=function(aQ,aR){return c(function(aS){var aW=aO,aV,aU;try{aV=aQ();if(aV!==null){aW=aV}aU=aR(aV)}catch(aT){return new C(aD(aT).subscribe(aS),aW)}return new C(aU.subscribe(aS),aW)})};var V=I.fromArray=function(aR,aQ){aQ||(aQ=ag);return c(function(aS){var aT=0;return aQ.scheduleRecursive(function(aU){if(aT<aR.length){aS.onNext(aR[aT++]);aU()}else{aS.onCompleted()}})})},c=I.createWithDisposable=function(aQ){return new P(aQ)};I.create=function(aQ){return c(function(aR){return ap(aQ(aR))})};I.range=function(aS,aR,aQ){aQ||(aQ=ag);return c(function(aT){return aQ.scheduleRecursiveWithState(0,function(aV,aU){if(aV<aR){aT.onNext(aS+aV);aU(aV+1)}else{aT.onCompleted()}})})};t.repeat=function(aQ){return ai(this,aQ).concat()};t.retry=function(aQ){return ai(this,aQ).catchException()};I.repeat=function(aS,aQ,aR){aR||(aR=ag);if(aQ===Y){aQ=-1}return ab(aS,aR).repeat(aQ)};t.select=function(aQ){var aR=this;return c(function(aS){var aT=0;return aR.subscribe(function(aW){var aU;try{aU=aQ(aW,aT++)}catch(aV){aS.onError(aV);return}aS.onNext(aU)},aL(aS,"onError"),aL(aS,"onCompleted"))})};t.where=function(aQ){var aR=this;return c(function(aS){var aT=0;return aR.subscribe(function(aW){var aV;try{aV=aQ(aW,aT++)}catch(aU){aS.onError(aU);return}if(aV){aS.onNext(aW)}},aL(aS,"onError"),aL(aS,"onCompleted"))})};t.groupByUntil=function(aQ,aS,aR,aU){var aT=this;aS||(aS=X);aU||(aU=aK);return c(function(aW){var aY={},aX=new C,aV=new ak(aX);aX.add(aT.subscribe(function(a7){var a2,bb,a3,aZ,a0,a9,ba,a5,a6,a1,a8;try{ba=aQ(a7);a5=aU(ba)}catch(a4){for(a8 in aY){aY[a8].onError(a4)}aW.onError(a4);return}a0=false;try{a1=aY[a5];if(!a1){a1=new aJ;aY[a5]=a1;a0=true}}catch(a4){for(a8 in aY){aY[a8].onError(a4)}aW.onError(a4);return}if(a0){a9=new o(ba,a1,aV);bb=new o(ba,a1);try{a2=aR(bb)}catch(a4){for(a8 in aY){aY[a8].onError(a4)}aW.onError(a4);return}aW.onNext(a9);a6=new m;aX.add(a6);aZ=function(){if(aY[a5]!==Y){delete aY[a5];a1.onCompleted()}aX.remove(a6)};a6.disposable(a2.take(1).subscribe(function(){},function(bc){for(a8 in aY){aY[a8].onError(bc)}aW.onError(bc)},function(){aZ()}))}try{a3=aS(a7)}catch(a4){for(a8 in aY){aY[a8].onError(a4)}aW.onError(a4);return}a1.onNext(a3)},function(a0){for(var aZ in aY){aY[aZ].onError(a0)}aW.onError(a0)},function(){for(var aZ in aY){aY[aZ].onCompleted()}aW.onCompleted()}));return aV})};t.groupBy=function(aQ,aR,aS){return this.groupByUntil(aQ,aR,function(){return U()},aS)};t.take=function(aR,aQ){if(aR<0){throw new Error(n)}if(aR===0){return l(aQ)}var aS=this;return c(function(aT){var aU=aR;return aS.subscribe(function(aV){if(aU>0){aU--;aT.onNext(aV);if(aU===0){aT.onCompleted()}}},aL(aT,"onError"),aL(aT,"onCompleted"))})};t.skip=function(aQ){if(aQ<0){throw new Error(n)}var aR=this;return c(function(aS){var aT=aQ;return aR.subscribe(function(aU){if(aT<=0){aS.onNext(aU)}else{aT--}},aL(aS,"onError"),aL(aS,"onCompleted"))})};t.takeWhile=function(aQ){var aR=this;return c(function(aT){var aU=0,aS=true;return aR.subscribe(function(aV){if(aS){try{aS=aQ(aV,aU++)}catch(aW){aT.onError(aW);return}if(aS){aT.onNext(aV)}else{aT.onCompleted()}}},aL(aT,"onError"),aL(aT,"onCompleted"))})};t.skipWhile=function(aQ){var aR=this;return c(function(aT){var aU=0,aS=false;return aR.subscribe(function(aV){if(!aS){try{aS=!aQ(aV,aU++)}catch(aW){aT.onError(aW);return}}if(aS){aT.onNext(aV)}},aL(aT,"onError"),aL(aT,"onCompleted"))})};t.selectMany=function(aQ,aR){if(aR){return this.selectMany(function(aS){return aQ(aS).select(function(aT){return aR(aS,aT)})})}if(typeof aQ==="function"){return ad.call(this,aQ)}return ad.call(this,function(){return aQ})};var ad=function(aQ){return this.select(aQ).mergeObservable()};var h="Sequence contains no elements.";t.finalValue=function(){var aQ=this;return c(function(aR){var aS=false,aT;return aQ.subscribe(function(aU){aS=true;aT=aU},function(aU){aR.onError(aU)},function(){if(!aS){aR.onError(new Error(h))}else{aR.onNext(aT);aR.onCompleted()}})})},t.toArray=function(){var aQ=function(aS,aR){aS.push(aR);return aS};return this.scan([],aQ).startWith([]).finalValue()};t.materialize=function(){var aQ=this;return c(function(aR){return aQ.subscribe(function(aS){aR.onNext(q.createOnNext(aS))},function(aS){aR.onNext(q.createOnError(aS));aR.onCompleted()},function(){aR.onNext(q.createOnCompleted());aR.onCompleted()})})};t.dematerialize=function(){var aQ=this;return c(function(aR){return aQ.subscribe(function(aS){return aS.accept(aR)},aL(aR,"onError"),aL(aR,"onCompleted"))})};t.asObservable=function(){var aQ=this;return c(function(aR){return aQ.subscribe(aR)})};t.windowWithCount=function(aR,aQ){var aS=this;if(aR<=0){throw new Error(n)}if(aQ===Y){aQ=aR}if(aQ<=0){throw new Error(n)}return c(function(aV){var aT=new m,aU=new ak(aT),aY=0,aX=[],aW=function(){var aZ=new aJ;aX.push(aZ);aV.onNext(T(aZ,aU))};aW();aT.disposable(aS.subscribe(function(aZ){var a2,a0,a1;for(a0=0;a0<aX.length;a0++){aX[a0].onNext(aZ)}a2=aY-aR+1;if(a2>=0&&a2%aQ===0){a1=aX.shift();a1.onCompleted()}aY++;if(aY%aQ===0){aW()}},function(aZ){while(aX.length>0){aX.shift().onError(aZ)}aV.onError(aZ)},function(){while(aX.length>0){aX.shift().onCompleted()}aV.onCompleted()}));return aU})};t.bufferWithCount=function(aR,aQ){if(aQ===Y){aQ=aR}return this.windowWithCount(aR,aQ).selectMany(function(aS){return aS.toArray()}).where(function(aS){return aS.length>0})};t.startWith=function(){var aQ,aR,aS=0;if(arguments.length>0&&arguments[0]!==null&&arguments[0].now!==undefined){aR=arguments[0];aS=1}else{aR=al}aQ=z.call(arguments,aS);return aN([V(aQ,aR),this]).concat()};t.scan=function(){var aQ,aT=false,aR;if(arguments.length===2){aQ=arguments[0];aR=arguments[1];aT=true}else{aR=arguments[0]}var aS=this;return ay(function(){var aV=false,aU;return aS.select(function(aW){if(aV){aU=aR(aU,aW)}else{aU=aT?aR(aQ,aW):aW;aV=true}return aU})})};t.distinctUntilChanged=function(aQ,aR){var aS=this;aQ||(aQ=X);aR||(aR=ae);return c(function(aU){var aT=false,aV;return aS.subscribe(function(aZ){var aY=false,aX;try{aX=aQ(aZ)}catch(aW){aU.onError(aW);return}if(aT){try{aY=aR(aV,aX)}catch(aW){aU.onError(aW);return}}if(!aT||!aY){aT=true;aV=aX;aU.onNext(aZ)}},aL(aU,"onError"),aL(aU,"onCompleted"))})};t.finallyAction=function(aQ){var aR=this;return c(function(aS){var aT=aR.subscribe(aS);return ap(function(){try{aT.dispose()}finally{aQ()}})})};t.doAction=function(aR,aT,aQ){var aU=this,aS;if(typeof aR==="function"){aS=aR}else{aS=function(aV){aR.onNext(aV)};aT=function(aV){aR.onError(aV)};aQ=function(){aR.onCompleted()}}return c(function(aV){return aU.subscribe(function(aW){try{aS(aW)}catch(aX){aV.onError(aX)}aV.onNext(aW)},function(aW){if(!aT){aV.onError(aW)}else{try{aT(aW)}catch(aX){aV.onError(aX)}aV.onError(aW)}},function(){if(!aQ){aV.onCompleted()}else{try{aQ()}catch(aW){aV.onError(aW)}aV.onCompleted()}})})};t.skipLast=function(aQ){var aR=this;return c(function(aS){var aT=[];return aR.subscribe(function(aU){aT.push(aU);if(aT.length>aQ){aS.onNext(aT.shift())}},aL(aS,"onError"),aL(aS,"onCompleted"))})};t.takeLast=function(aQ){var aR=this;return c(function(aS){var aT=[];return aR.subscribe(function(aU){aT.push(aU);if(aT.length>aQ){aT.shift()}},aL(aS,"onError"),function(){while(aT.length>0){aS.onNext(aT.shift())}aS.onCompleted()})})};t.ignoreElements=function(){var aQ=this;return c(function(aR){return aQ.subscribe(aF,aL(aR,"onError"),aL(aR,"onCompleted"))})};t.elementAt=function(aQ){if(aQ<0){throw new Error(n)}var aR=this;return c(function(aS){var aT=aQ;return aR.subscribe(function(aU){if(aT===0){aS.onNext(aU);aS.onCompleted()}aT--},aL(aS,"onError"),function(){aS.onError(new Error(n))})})};t.elementAtOrDefault=function(aR,aQ){var aS=this;if(aR<0){throw new Error(n)}if(aQ===Y){aQ=null}return c(function(aT){var aU=aR;return aS.subscribe(function(aV){if(aU===0){aT.onNext(aV);aT.onCompleted()}aU--},aL(aT,"onError"),function(){aT.onNext(aQ);aT.onCompleted()})})};t.defaultIfEmpty=function(aQ){var aR=this;if(aQ===Y){aQ=null}return c(function(aS){var aT=false;return aR.subscribe(function(aU){aT=true;aS.onNext(aU)},aL(aS,"onError"),function(){if(!aT){aS.onNext(aQ)}aS.onCompleted()})})};t.distinct=function(aQ,aS){var aR=this;aQ||(aQ=X);aS||(aS=aK);return c(function(aU){var aT={};return aR.subscribe(function(aW){var aY,aZ,a0,aV=false;try{aY=aQ(aW);aZ=aS(aY)}catch(aX){aU.onError(aX);return}for(a0 in aT){if(aZ===a0){aV=true;break}}if(!aV){aT[aZ]=null;aU.onNext(aW)}},aL(aU,"onError"),aL(aU,"onCompleted"))})};t.mergeObservable=function(){var aQ=this;return c(function(aS){var aT=new C,aU=false,aR=new m;aT.add(aR);aR.disposable(aQ.subscribe(function(aV){var aW=new m;aT.add(aW);aW.disposable(aV.subscribe(function(aX){aS.onNext(aX)},function(aX){aS.onError(aX)},function(){aT.remove(aW);if(aU&&aT.length===1){aS.onCompleted()}}))},function(aV){aS.onError(aV)},function(){aU=true;if(aT.length===1){aS.onCompleted()}}));return aT})};t.merge=function(aR){if(typeof aR!=="number"){return I.merge(this,aR)}var aQ=this;return c(function(aT){var aU=0,aW=new C,aX=false,aV=[],aS=function(aY){var aZ=new m;aW.add(aZ);aZ.disposable(aY.subscribe(function(a0){aT.onNext(a0)},function(a0){aT.onError(a0)},function(){var a0;aW.remove(aZ);if(aV.length>0){a0=aV.shift();aS(a0)}else{aU--;if(aX&&aU===0){aT.onCompleted()}}}))};aW.add(aQ.subscribe(function(aY){if(aU<aR){aU++;aS(aY)}else{aV.push(aY)}},aL(aT,"onError"),function(){aX=true;if(aU===0){aT.onCompleted()}}));return aW})};t.switchLatest=function(){var aQ=this;return c(function(aS){var aV=false,aU=new ar,aW=false,aR=0,aT=aQ.subscribe(function(aX){var aY=new m,aZ=++aR;aV=true;aU.disposable(aY);return aY.disposable(aX.subscribe(function(a0){if(aR===aZ){aS.onNext(a0)}},function(a0){if(aR===aZ){aS.onError(a0)}},function(){if(aR===aZ){aV=false;if(aW){aS.onCompleted()}}}))},aL(aS,"onError"),function(){aW=true;if(!aV){aS.onCompleted()}});return new C(aT,aU)})};I.merge=function(){var aR,aQ;if(!arguments[0]){aR=al;aQ=z.call(arguments,1)}else{if(arguments[0].now){aR=arguments[0];aQ=z.call(arguments,1)}else{aR=al;aQ=z.call(arguments,0)}}if(aQ[0] instanceof Array){aQ=aQ[0]}return V(aQ,aR).mergeObservable()};var M=function(aQ,aT,aS){var aR=z.call(aS,0);aR.unshift(aQ);return aT.apply(aQ,aR)};t.concat=function(){return M(this,S,arguments)};t.concatObservable=function(){return this.merge(1)};var S=I.concat=function(){var aQ=aM(arguments,0);return aN(aQ).concat()};t.catchException=function(aQ){if(typeof aQ==="function"){return d(this,aQ)}return aA([this,aQ])};var d=function(aR,aQ){return c(function(aS){var aU=new m,aT=new ar;aU.disposable(aR.subscribe(aL(aS,"onNext"),function(aX){var aY,aV;try{aV=aQ(aX)}catch(aW){aS.onError(aW);return}aY=new m;aT.disposable(aY);aY.disposable(aV.subscribe(aS))},aL(aS,"onCompleted")));return aT})};var aA=I.catchException=function(){var aQ=aM(arguments,0);return aN(aQ).catchException()};t.onErrorResumeNext=function(aQ){if(!aQ){throw new Error("Second observable is required")}return L([this,aQ])};var L=I.onErrorResumeNext=function(){var aQ=aM(arguments,0);return c(function(aS){var aU=0,aT=new ar,aR=al.scheduleRecursive(function(aV){var aW,aX;if(aU<aQ.length){aW=aQ[aU++];aX=new m;aT.disposable(aX);aX.disposable(aW.subscribe(aL(aS,"onNext"),function(){aV()},function(){aV()}))}else{aS.onCompleted()}});return new C(aT,aR)})};t.combineLatest=function(){var aS=this,aR=z.call(arguments),aQ=aR.pop();aR.unshift(this);return c(function(aX){var aU=aR.length,a0=new Array(aU),a2=false,a1=new Array(aU),aZ=new Array(aU);var aW=function(a5){var a4;a0[a5]=true;if(a2||(a2=R.call(a0,X))){try{a4=aQ.apply(aS,aZ)}catch(a3){aX.onError(a3);return}aX.onNext(a4)}else{if(R.call(af.call(a1,function(a6,a7){return a7!==a5}),X)){aX.onCompleted()}}};var aV=function(a3){a1[a3]=true;if(R.call(a1,X)){aX.onCompleted()}};var aT=new Array(aU);for(var aY=0;aY<aU;aY++){(function(a3){aT[a3]=new m;aT[a3].setDisposable(aR[a3].subscribe(function(a4){aZ[a3]=a4;aW(a3)},aL(aX,"onError"),function(){aV(a3)}))})(aY)}return new C(aT)})};t.zip=function(){var aS=this,aR=z.call(arguments),aQ=aR.pop();aR.unshift(aS);return c(function(aY){var aU=aR.length,aW=new Array(aU),a1=new Array(aU);var aX=function(a5){var a4,a2;if(R.call(aW,function(a6){return a6&&a6.length>0})){try{a2=av.call(aW,function(a6){return a6.shift()});a4=aQ.apply(aS,a2)}catch(a3){aY.onError(a3);return}aY.onNext(a4)}else{if(R.call(af.call(a1,function(a6,a7){return a7!==a5}),X)){aY.onCompleted()}}};var aV=function(a2){a1[a2]=true;if(R.call(a1,X)){aY.onCompleted()}};var aT=new Array(aU);for(var a0=0;a0<aU;a0++){(function(a2){aT[a2]=new m;aT[a2].setDisposable(aR[a2].subscribe(function(a3){aW[a2]||(aW[a2]=[]);aW[a2].push(a3);aX(a2)},aL(aY,"onError"),function(){aV(a2)}))})(a0)}var aZ=new C(aT);aZ.add(ap(function(){for(var a2=0;a2<aU;a2++){aW[a2]=null}}));return aZ})};t.takeUntil=function(aQ){var aR=this;return E(aQ,aR,function(aS,aV){var aT=false,aU=false;return new aH(function(aW){if(!aU&&!aT){if(aW.kind==="C"){aT=true}else{if(aW.kind==="E"){aT=true;aU=true;aS.onError(aW.exception)}else{aU=true;aS.onCompleted()}}}},function(aW){if(!aU){aW.accept(aS);aU=aW.kind!=="N";if(aU){aV.dispose()}}})})};t.skipUntil=function(aQ){return E(this,aQ,function(aS,aV,aU){var aT=false,aR=false;return new aH(function(aW){if(aW.kind=="E"){aS.onError(aW.exception)}else{if(aT){aW.accept(aS)}}},function(aW){if(!aR){if(aW.kind==="N"){aT=true}else{if(aW.kind==="E"){aS.onError(aW.exception)}}aR=true;aU.dispose()}})})};I.amb=function(){var aU=U(),aS,aQ,aR=aM(arguments,0),aT=function(aV,aW){return aV.amb(aW)};for(aS=0,aQ=aR.length;aS<aQ;aS++){aU=aT(aU,aR[aS])}return aU};t.amb=function(aQ){return E(this,aQ,function(aS,aU,aT){var aR="N";return new aH(function(aV){if(aR==="N"){aR="L";aT.dispose()}if(aR==="L"){aV.accept(aS)}},function(aV){if(aR==="N"){aR="R";aU.dispose()}if(aR==="R"){aV.accept(aS)}})})};var K=function(aR){an(aQ,aR);function aQ(){aQ.base.constructor.apply(this,arguments)}aQ.prototype.next=function(aS){aQ.base.next.call(this,aS);this.ensureActive()};aQ.prototype.error=function(aS){aQ.base.error.call(this,aS);this.ensureActive()};aQ.prototype.completed=function(){aQ.base.completed.call(this);this.ensureActive()};return aQ}(ah);t.observeOn=function(aQ){var aR=this;return c(function(aS){return aR.subscribe(new K(aQ,aS))})};t.subscribeOn=function(aQ){var aR=this;return c(function(aT){var aS=new m,aU=new ar;aU.setDisposable(aS);aS.setDisposable(aQ.schedule(function(){aU.setDisposable(new v(aQ,aR.subscribe(aT)))}));return aU})}})(this);if(!this.window){global.Rx=this.Rx}config.ConfigService={loaded:new Rx.ReplaySubject,setModel:function(c){this._setModelOrError(c)},error:function(c){this._setModelOrError(null,c)},_setModelOrError:function(j,f){var m="config.ConfigService: ",c=util.log.debug,l=this.loaded,o=true,h=!j,q,d;if(h){c(m+"data missing: attempt to load from storage");o=false;j=this._loadFromStorage();h=!j}if(!h){for(var p in j){try{j[p]=JSON.parse(j[p])}catch(n){}}q=Boolean(j.user);if(o){d=j.clock_time;j.timeOffset=d?d*1000-Date.now():0}util.extend(this,j);this.configData=j;this.fromUser=q;if(o&&q){util.storage.setJSON(localStorage,"config",j)}l.onNext(this);l.onCompleted()}else{l.onError(new util.Error("Config model empty",config.debugCodes.startup.configService,f))}},_loadFromStorage:function(){var d=util.storage.getJSON(localStorage,"config"),c;if(d){if(d.data){d=d.data}if(d.user===webapi.ApiSession.userId){c=d}}return c}};config.ConfigServiceMap={_map:{},register:function(c,d,e){var h=this._map,f=h[d]||(h[d]=[]);f.push([c,e])},populate:function(d){var m=this._map,f,l,e,c,j,h;for(f in m){if(f in d){h=d[f];l=m[f];for(e=0,c=l.length;e<c;e++){j=l[e];j[0][j[1]||f]=h}}}}};config.ConfigService.loaded.subscribe(function(c){config.ConfigServiceMap.populate(c)},NOOP);util.extend=function(){var e=arguments,l=e[0],j=e.length,h=typeof l==="boolean"?l:false,f=1,d,c,m;if(h){l=e[1];f=2}for(f;f<j;f++){d=e[f];if(d!=null){for(c in d){if(h&&c in l){continue}m=d[c];if(m!==undefined&&m!==l){l[c]=m}}}}return l};(function(){var e="release"==="debug",d=config.environment,c=util.CurrentUrlParams;config.isDebugBuild=e;config.nrdpVersion="3.1";config.urlProtocol=e&&c.get("urlProtocol")||d.urlProtocol;config.urlGetLimit=2000;config.uiBootUrl="://uiboot.netflix.com/apps/htmltvui/upgrade_policy";config.isPaladinEnabled=c.has("isPaladin");config._wwwHost=e&&c.get("wwwHost");config.idleReloadTimeout=e&&parseInt(c.get("reloadTimeout"),10)||28800000;config.appRefreshThreshold=60000;config.screensaverTimeout=e&&parseInt(c.get("saverTimeout"),10)||1200000;config.rapidKeyDelay=275;config.determinatePressHoldTime=80;config.rapidOffAxisThreshold=150;config.stuckKeyDelay=100;config.uiCardShowDelay=parseInt("500",10);config.uiVersion="20130410164555";config.uiBestResolution="720p";config.uiName="lruderrorpage";config.uiAppName="htmltvui";config.startupDone=false})();config.__defineGetter__("wwwHost",function(){return this._wwwHost||this._wwwHostBase});config.ConfigServiceMap.register(config,"www_host","_wwwHostBase");util.TimeService={now:function(){var d=config.ConfigService&&config.ConfigService.configData,c=d&&d.timeOffset||0;return Date.now()+c}};webapi.DcrRequest=function(e){var n=new this._Params(e.url),l=e.data,h=e.type,f=h==="POST",c=this._METHODS,m,d,j;if(!c[h]){e.type=c.GET}e.withCredentials=true;if(l){for(m in l){if(!n.has(m)){n.add(m,l[m])}}}d=n.toString();if(!f&&d.length>this._GET_LIMIT){f=true;e.type="POST";if(!n.has("method")){n.add("method","GET")}}j=n.baseUrl;e.url=j;e.unsignedUrl=d;this.request=e;this.baseUrl=e.url;this.parameters=n.getParams();this.unsignedUrl=d};webapi.DcrRequest.prototype={sign:function(){var d=this.request,c=util.TimeService.now()+"r"+Math.random()*1000+"e"+(devicebridge.Adapter.device.ESN||"NA");d.data=this.parameters+"&uuid="+c;if(this._newHost){d.url=util.getAbsoluteUrl(d.url,this._newHost,true);delete this._newHost}return d},setHost:function(c){this._newHost=c},_Params:util.UrlParams,_METHODS:util.makeEnum("GET","POST"),_GET_LIMIT:config.urlGetLimit};var model={};var devicebridge={};devicebridge.Adapter={};(function(e){var h=new Rx.ReplaySubject;if(window.nrdp&&nrdp.init&&!nrdp.isReady){var j=util.CurrentUrlParams,f,d;function c(l){nrdp.removeEventListener("fatalerror",c);h.onError(new util.Error("NRDP init fatalerror",config.debugCodes.startup.nrdp,l))}nrdp.addEventListener("fatalerror",c);nrdp.addEventListener("init",function(){nrdp.removeEventListener("init",arguments.callee);nrdp.removeEventListener("fatalerror",c);h.onNext();h.onCompleted()});f=config.isDebugBuild&&j.get("nbpdHost")||"http://localcontrol.netflix.com/";d=j.has("nativeTransport")?JSON.parse(j.get("nativeTransport")):undefined;nrdp.init(f,d)}else{h.onNext();h.onCompleted()}e.nrdpInited=h})(devicebridge);util.describeObject=function(h){var d,f,c=[],e=arguments.callee;for(d in h){f=h[d];c.push(d+": "+(typeof f==="object"?e(f):f))}return"{ "+c.join(", ")+" }"};state.Context={_PROPERTIES:["uiContext","movieIndex","listIndex","trackId","trackUrl","playData","uiContextData"],get listIndices(){return this._getAllOccurrences(state.activeState.parentState,"listIndex",true,[])},get uiContext(){return this._getTopOccurrence(state.rootState,"uiContext",true)},get movieIndex(){return this._getTopOccurrence(state.rootState,"movieIndex",true)},get videoId(){return this._getTopOccurrence(state.rootState,"videoId",true)},get listIndex(){return this._getTopOccurrence(state.rootState,"listIndex",true)},get trackId(){return this._getTopOccurrence(state.rootState,"trackId",true)},get trackUrl(){return this._getTopOccurrence(state.rootState,"trackUrl",true)},get playData(){return this._getTopOccurrence(state.rootState,"playData",true)},get uiContextData(){return this._getTopOccurrence(state.rootState,"uiContextData",true)},get apiRequestId(){return this._getTopOccurrence(state.rootState,"apiRequestId",true)},get uiContextPath(){return this._getPathOfOccurances(state.rootState,"uiContext",[]).join("/")},toString:function(){var f=this._PROPERTIES,d=[],e,c,h;for(e=0,c=f.length;e<c;e++){h=f[e];d.push(h+" = "+this[h])}return d.join(", ")},_getTopOccurrence:function(e,l){if(!e){return undefined}var d=e.stack,c=d.length,h,j,f;for(h=c-1;h>=0;h--){f=d[h];if(f instanceof state.ICompoundState){j=this._getTopOccurrence(f,l);if(j!==undefined){return j}}if(f.providesContext){j=f[l];if(j!==undefined){return j}}}return undefined},_getAllOccurrences:function(o,l,c,n){var m=o;while(!m.isRoot&&c){m=m.parentState}var h=m.stack,f=h.length,e,j,d;for(e=0;e<f;e++){d=h[e];if(d instanceof state.ICompoundState){this._getAllOccurrences(d,l,false,n)}if(d.providesContext){j=d[l];if(j!=undefined){n.push(j)}}}if(m.providesContext&&c){j=m[l];if(j!=undefined){n.push(j)}}return n},_getPathOfOccurances:function(f,l,j){var d,h,e,c;if(f.providesContext&&(h=f[l])){if(h!=null){j.push(h)}}if(f instanceof state.ICompoundState){d=f.stack;c=d.length;if(c){for(e=0;e<c;e++){this._getPathOfOccurances(d[e],l,j)}}}return j}};if(typeof Function.prototype.bind!=="function"){Object.defineProperty(Function.prototype,"bind",{enumerable:false,value:function(e){var f=Array.prototype.slice,d=f.call(arguments,1),c=this;return function(){return c.apply(e,d.concat(f.call(arguments)))}}})}var netflix={};(function(){var c=function(){};if(typeof console==="undefined"){console={log:c,info:c,warn:c,debug:c,error:c}}if(console.log.bind){netflix.console={log:console.log.bind(console),info:console.info.bind(console),warn:console.warn.bind(console),debug:console.debug.bind(console),error:console.error.bind(console)}}else{netflix.console={log:function(){console.log(Array.prototype.slice(arguments))},info:function(){console.info(Array.prototype.slice(arguments))},warn:function(){console.warn(Array.prototype.slice(arguments))},debug:function(){console.debug(Array.prototype.slice(arguments))}}}})();(function(B){if(B.log){return}var d="debug",h="error",p="time",m="timeEnd",t=[p,m,"group","groupEnd"],u=[d].concat(t,["info","warn",h,"fatal"]),c=h,n=u.indexOf(c),j=["url","nrdp","config","code"],e="ui-",f=util.CurrentUrlParams,l=window.navigator?/win\d{2}|mac\w{3,5}/i.test(window.navigator.platform):false,o={local:{code:"error",url:f.get("logLevel")},remote:{code:"error",url:f.get("remoteLogLevel")}},w={},q;function z(C,D){u.forEach(function(I,F){var G,E,H;if(t.indexOf(I)===-1){if(C[I]){D[I]=function(){for(G=0,E=arguments.length;G<E;G++){H=arguments[G];if(typeof H==="object"){H=JSON.stringify(H)}C[I](H)}}}else{D[I]=D[u[F-1]]}}})}function v(C,D,E){times={};D[p]=function(F){if(!times[F]){times[F]=Date.now()}};D[m]=function(F){var G=times[F];if(G){delete times[F];G=Date.now()-G;C[E](F+": "+G+"ms")}}}function s(E){var C=e+E,D=u.indexOf(E)<n?c:E;return function(){var I=devicebridge&&devicebridge.Adapter,H=I&&I.device,F=H.SDKVersion&&H.SDKVersion.version,G=H&&H.getUIVersion();for(i=0,len=arguments.length;i<len;i++){message=arguments[i];if(typeof message==="string"){message={message:message}}message=util.extend({event:C,sdk_version:F,ui_version:G,ui_context:state.Context.uiContext},message);nrdp.log[D](JSON.stringify(message))}}}function A(){var F={},I=!!q,G={},E,H,C;function D(J){var K=o[J];return function(L){var M=K[L];if(M){G[J]=M.toLowerCase()}return M}}j.some(D("local"));j.some(D("remote"));E=G.local;H=u.indexOf(E);C=u.indexOf(G.remote);u.forEach(function(M,J){var L,K;if(J>=H){if(I&&J>=C){K=M===m;if(K||t.indexOf(M)===-1){L=q(M);if(K){v({debug:L},w,d);L=w[M]}}}else{L=w[M]}}F[M]=L||NOOP});B.log=F}if(console){z(console,w);t.forEach(function(D){var C=console[D];if(C){C=C.bind(console)}w[D]=C||NOOP})}if(!(console&&console[p]&&console[m])){v(w,w,d)}A();config.ConfigService.loaded.subscribe(function(C){var D=C.log_level_local,E=C.log_level_remote;if(D||E){o.local.config=D;o.remote.config=E;A()}},NOOP);devicebridge.nrdpInited.subscribe(function(){var C=window.nrdp&&nrdp.log,D;if(C){D=C&&C.traceAreas;if(D&&D.indexOf("UI_SCRIPT")!==-1){o.local.nrdp=d}if(!l){z(C,w);v(w,w,d);q=s}A()}},NOOP)})(util);netflix.console.log=util.log.debug;["error","warn","info"].forEach(function(c){netflix.console[c]=util.log[c]});if(util.CurrentUrlParams.get("isPs3")){devicebridge.isPs3=true;devicebridge.isPs3Faked=true}else{devicebridge.isPs3=window.nrdp&&typeof nrdp.ps3==="object"?true:false}(function(d){var c=[];if(!d.nrdp){return}else{if(nrdp.video){c=nrdp.video._priv?nrdp.video._priv.eventHandlers:[]}}nrdp.video={addEventListener:function(f,h,e){nrdp._addEventListener("video",f,h)},removeEventListener:function(f,h,e){nrdp._removeEventListener("video",f,h)},setGlobalEventListener:function(e){nrdp.video._priv.globalEventListener=e},dispatchEvent:function(e){nrdp.video._priv.dispatchEvent(e)},canPlayType:function(){return"probably"},load:function(){nrdp.video._priv.load()},play:function(){nrdp.video._priv.play()},pause:function(){nrdp.video._priv.pause()},setVideoWindow:function(l,j,h,f,e){nrdp.media.setVideoWindow(l,j,h,f,e)},bringToFront:function(){nrdp.media.bringToFront()},sendToBack:function(){nrdp.media.sendToBack()},get left(){return nrdp.video._priv.left},set left(e){nrdp.media.setVideoWindow(e,nrdp.video._priv.top,nrdp.video._priv.width,nrdp.video._priv.height,0)},get top(){return nrdp.video._priv.top},set top(e){nrdp.media.setVideoWindow(nrdp.video._priv.left,e,nrdp.video._priv.width,nrdp.video._priv.height,0)},get width(){return nrdp.video._priv.width},set width(e){nrdp.media.setVideoWindow(nrdp.video._priv.left,nrdp.video._priv.top,e,nrdp.video._priv.height,0)},get height(){return nrdp.video._priv.height},set height(e){nrdp.media.setVideoWindow(nrdp.video._priv.left,nrdp.video._priv.top,nrdp.video._priv.width,e,0)},get videoWidth(){return nrdp.video._priv.getVideoWidth()},get videoHeight(){return nrdp.video._priv.getVideoHeight()},get aspectRatioX(){return nrdp.video._priv.getAspectRatioX()},get aspectRatioY(){return nrdp.video._priv.getAspectRatioY()},get src(){return nrdp.video._priv.src},set src(e){nrdp.video._priv.setSrc(e)},get fastStartData(){return nrdp.video._priv.fastStartData},set fastStartData(e){nrdp.video._priv.fastStartData=e},get currentSrc(){return nrdp.video._priv.currentSrc},get audioTrackList(){return nrdp.media.audioTrackList},get audioTrack(){var e=nrdp.media.currentAudioTrack;if(e!==undefined&&e!=-1){return"netflix://audioTrack/index="+e}return""},set audioTrack(e){nrdp.video._priv.setAudioTrack(e)},get timedTextTrackList(){return nrdp.media.subtitleTrackList},get timedText(){var e=nrdp.media.currentSubtitleTrack;if(e!==undefined&&e!=-1){return"netflix://timedText/index="+e}return""},set timedText(e){nrdp.video._priv.setTimedText(e)},setTracks:function(e,f){nrdp.video._priv.initialAudioTrackId=e;nrdp.video._priv.initialSubtitleTrackId=f},get networkState(){return nrdp.video._priv.getNetworkState()},get readyState(){return nrdp.video._priv.getReadyState()},get instantBitRate(){return nrdp.video._priv.instantBitRate},get targetBitRate(){return nrdp.video._priv.getTargetBitRate()},get isHighDefinition(){return nrdp.video._priv.getIsHD()},get isSuperHighDefinition(){return nrdp.video._priv.getIsSuperHD()}